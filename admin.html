<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | Moteros Sports Line</title>
    <link rel="icon" href="https://pbblthbrdkevuyjxyuar.supabase.co/storage/v1/object/public/productos-imagenes/moteros%20logo.jpg">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal Cambiar ContraseÃ±a -->
    <div id="modalCambiarPassword" class="modal-overlay" style="display:none;">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <h3>ğŸ” Cambiar ContraseÃ±a</h3>
                <button onclick="cerrarModalPassword()" class="btn-cerrar">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ContraseÃ±a Actual <span class="required">*</span></label>
                    <input type="password" id="passwordActual" class="form-control" placeholder="Ingresa tu contraseÃ±a actual">
                </div>
                <div class="form-group">
                    <label>Nueva ContraseÃ±a <span class="required">*</span></label>
                    <input type="password" id="passwordNueva" class="form-control" placeholder="MÃ­nimo 6 caracteres">
                </div>
                <div class="form-group">
                    <label>Confirmar Nueva ContraseÃ±a <span class="required">*</span></label>
                    <input type="password" id="passwordConfirmar" class="form-control" placeholder="Repite la nueva contraseÃ±a">
                </div>
                <div class="alert alert-info" style="margin-top:1rem; font-size:0.85rem;">
                    ğŸ’¡ La contraseÃ±a se guarda de forma segura en la base de datos.
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="cambiarPassword()" class="btn btn-success">ğŸ’¾ Guardar</button>
                <button onclick="cerrarModalPassword()" class="btn btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="login-wrapper">
        <div id="pantallaAbrirCaja">
            <img src="https://pbblthbrdkevuyjxyuar.supabase.co/storage/v1/object/public/productos-imagenes/moteros%20logo.jpg" 
                 alt="Moteros Sports Line" class="locked-logo logo-img">
            <h1>Admin Panel</h1>
            <p class="subtitle">Moteros Sports Line</p>
            <input type="password" id="adminPassword" class="login-input" placeholder="Ingresa la contraseÃ±a" onkeypress="if(event.key==='Enter')loginAdmin()">
            <button onclick="loginAdmin()" class="login-btn">Iniciar SesiÃ³n</button>
            <p id="loginError" class="login-error"></p>
        </div>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel" style="display:none;">
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER CON MENÃš HORIZONTAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <header class="top-header">
            <div class="header-brand">
                <img src="https://pbblthbrdkevuyjxyuar.supabase.co/storage/v1/object/public/productos-imagenes/moteros%20logo.jpg" alt="Logo" style="height:40px;width:40px;border-radius:50%;object-fit:cover;margin-right:0.75rem;">
                <span class="brand-name">Moteros Admin</span>
            </div>
            
            <nav class="header-nav">
                <!-- PRINCIPAL -->
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">ğŸ“Š Principal <span class="arrow">â–¼</span></button>
                    <div class="nav-dropdown-content">
                        <a href="#" data-section="dashboard">ğŸ“Š Dashboard</a>
                        <a href="#" data-section="estadisticas">ğŸ“ˆ EstadÃ­sticas</a>
                        <a href="#" data-section="reportes">ğŸ“‘ Reportes</a>
                    </div>
                </div>

                <!-- VENTAS -->
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">ğŸ’° Ventas <span class="arrow">â–¼</span></button>
                    <div class="nav-dropdown-content">
                        <a href="#" data-section="ventas">ğŸ’° GestiÃ³n Ventas</a>
                        <a href="tienda-alcala.html" target="_blank">ğŸª POS AlcalÃ¡</a>
                        <a href="tienda-01.html" target="_blank">ğŸ¬ POS Local 01</a>
                        <a href="tienda-jordan.html" target="_blank">ğŸ¢ POS JordÃ¡n</a>
                        <a href="tienda-digital.html" target="_blank">ğŸŒ Tienda Digital</a>
                    </div>
                </div>

                <!-- ENVÃOS - NUEVO -->
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">ğŸ“¦ EnvÃ­os <span class="arrow">â–¼</span></button>
                    <div class="nav-dropdown-content">
                        <a href="#" data-section="envios">ğŸ“¦ GestiÃ³n EnvÃ­os</a>
                        <a href="#" data-section="envios-estadisticas">ğŸ“Š EstadÃ­sticas EnvÃ­os</a>
                    </div>
                </div>  

                <!-- CATÃLOGO -->
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">ğŸ“¦ CatÃ¡logo <span class="arrow">â–¼</span></button>
                    <div class="nav-dropdown-content">
                        <a href="#" data-section="productos">ğŸ“¦ Productos</a>
                        <a href="#" data-section="destacados">â­ Destacados</a>
                        <a href="#" data-section="inventario">ğŸ“‹ Inventario</a>
                        <a href="#" data-section="bodegas">ğŸ­ Bodegas</a>
                        <a href="#" data-section="alertas">âš ï¸ Alertas Stock</a>
                    </div>
                </div>

                <!-- FINANZAS -->
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">ğŸ’µ Finanzas <span class="arrow">â–¼</span></button>
                    <div class="nav-dropdown-content">
                        <a href="#" data-section="cierres">ğŸ’µ Cierres de Caja</a>
                        <a href="#" data-section="gastos">ğŸ’¸ Gastos</a>
                        <a href="#" data-section="deudores">ğŸ‘¥ Deudores</a>
                        <a href="#" data-section="proveedores">ğŸ­ Proveedores</a>
                        <a href="#" data-section="compras">ğŸ›’ Compras</a>
                        <a href="#" data-section="deudas">ğŸ“‹ Deudas Negocio</a>
                        <a href="#" data-section="creditos">ğŸï¸ CrÃ©dito Motero</a>
                    </div>
                </div>

                <!-- MARKETING -->
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">ğŸ“¢ Marketing <span class="arrow">â–¼</span></button>
                    <div class="nav-dropdown-content">
                        <a href="#" data-section="promociones">ğŸ·ï¸ Promociones</a>
                        <a href="#" data-section="blog">ğŸ“ Blog</a>
                        <a href="#" data-section="alianzas">ğŸ¤ Alianzas</a>
                    </div>
                </div>

                <!-- SISTEMA -->
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">âš™ï¸ Sistema <span class="arrow">â–¼</span></button>
                    <div class="nav-dropdown-content">
                        <a href="#" data-section="configuracion">âš™ï¸ ConfiguraciÃ³n</a>
                        <a href="#" onclick="mostrarCambiarPassword()">ğŸ” Cambiar ContraseÃ±a</a>
                        <a href="#" onclick="logout()" class="logout-link">ğŸšª Cerrar SesiÃ³n</a>
                    </div>
                </div>
            </nav>

            <!-- BÃºsqueda Global -->
            <div class="header-search" style="position:relative;">
                <input type="text" id="busquedaGlobal" class="form-control" placeholder="Buscar..."
                       style="width:280px;padding-left:2.5rem;border-radius:2rem;border:2px solid #e2e8f0;font-size:0.9rem;"
                       oninput="busquedaGlobalAdmin(this.value)" onfocus="mostrarResultadosBusqueda()" onblur="setTimeout(()=>ocultarResultadosBusqueda(),200)">
                <span style="position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#94a3b8;">ğŸ”</span>
                <div id="resultadosBusqueda" style="display:none;position:absolute;top:100%;left:0;right:0;background:white;border-radius:0.75rem;box-shadow:0 10px 40px rgba(0,0,0,0.15);max-height:400px;overflow-y:auto;z-index:9999;margin-top:0.5rem;">
                </div>
            </div>

            <div class="header-user">
                <span class="user-greeting">ğŸ‘¤ Admin</span>
                <button onclick="logout()" class="btn-header-logout" title="Cerrar sesiÃ³n">ğŸšª</button>
            </div>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">â˜°</button>
        </header>

        <!-- Mobile Navigation -->
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-header">
                <span>ğŸï¸ MenÃº</span>
                <button onclick="toggleMobileMenu()">âœ•</button>
            </div>
            <div class="mobile-nav-content">
                <div class="mobile-nav-group">
                    <div class="mobile-nav-title">Principal</div>
                    <a href="#" data-section="dashboard" onclick="toggleMobileMenu()">ğŸ“Š Dashboard</a>
                    <a href="#" data-section="estadisticas" onclick="toggleMobileMenu()">ğŸ“ˆ EstadÃ­sticas</a>
                    <a href="#" data-section="reportes" onclick="toggleMobileMenu()">ğŸ“‘ Reportes</a>
                </div>
                <div class="mobile-nav-group">
                    <div class="mobile-nav-title">Ventas</div>
                    <a href="#" data-section="ventas" onclick="toggleMobileMenu()">ğŸ’° GestiÃ³n Ventas</a>
                    <a href="tienda-alcala.html" target="_blank">ğŸª POS AlcalÃ¡</a>
                    <a href="tienda-01.html" target="_blank">ğŸ¬ POS Local 01</a>
                    <a href="tienda-jordan.html" target="_blank">ğŸ¢ POS JordÃ¡n</a>
                    <a href="tienda-digital.html" target="_blank">ğŸŒ Tienda Digital</a>
                </div>
                <div class="mobile-nav-group">
                    <div class="mobile-nav-title">CatÃ¡logo</div>
                    <a href="#" data-section="productos" onclick="toggleMobileMenu()">ğŸ“¦ Productos</a>
                    <a href="#" data-section="destacados" onclick="toggleMobileMenu()">â­ Destacados</a>
                    <a href="#" data-section="inventario" onclick="toggleMobileMenu()">ğŸ“‹ Inventario</a>
                    <a href="#" data-section="bodegas" onclick="toggleMobileMenu()">ğŸ­ Bodegas</a>
                    <a href="#" data-section="alertas" onclick="toggleMobileMenu()">âš ï¸ Alertas Stock</a>
                </div>
                <div class="mobile-nav-group">
                    <div class="mobile-nav-title">Finanzas</div>
                    <a href="#" data-section="cierres" onclick="toggleMobileMenu()">ğŸ’µ Cierres de Caja</a>
                    <a href="#" data-section="gastos" onclick="toggleMobileMenu()">ğŸ’¸ Gastos</a>
                    <a href="#" data-section="deudores" onclick="toggleMobileMenu()">ğŸ‘¥ Deudores</a>
                    <a href="#" data-section="proveedores" onclick="toggleMobileMenu()">ğŸ­ Proveedores</a>
                    <a href="#" data-section="compras" onclick="toggleMobileMenu()">ğŸ›’ Compras</a>
                    <a href="#" data-section="deudas" onclick="toggleMobileMenu()">ğŸ“‹ Deudas Negocio</a>
                    <a href="#" data-section="creditos" onclick="toggleMobileMenu()">ğŸï¸ CrÃ©dito Motero</a>
                </div>
                <div class="mobile-nav-group">
                    <div class="mobile-nav-title">Marketing</div>
                    <a href="#" data-section="promociones" onclick="toggleMobileMenu()">ğŸ·ï¸ Promociones</a>
                    <a href="#" data-section="blog" onclick="toggleMobileMenu()">ğŸ“ Blog</a>
                    <a href="#" data-section="alianzas" onclick="toggleMobileMenu()">ğŸ¤ Alianzas</a>
                </div>
                <div class="mobile-nav-group">
                    <div class="mobile-nav-title">Sistema</div>
                    <a href="#" data-section="configuracion" onclick="toggleMobileMenu()">âš™ï¸ ConfiguraciÃ³n</a>
                    <a href="#" onclick="mostrarCambiarPassword(); toggleMobileMenu()">ğŸ” Cambiar ContraseÃ±a</a>
                    <a href="#" onclick="logout()" class="logout-link">ğŸšª Cerrar SesiÃ³n</a>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONTENIDO PRINCIPAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <main class="main-content-horizontal">
            
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DASHBOARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="dashboardSection" class="section active">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <p>Resumen general del sistema</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ“¦</div>
                        <div class="stat-info">
                            <h3 id="statProductos">-</h3>
                            <p>Productos Activos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">ğŸ“Š</div>
                        <div class="stat-info">
                            <h3 id="statStockTotal">-</h3>
                            <p>Stock Total</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸ’°</div>
                        <div class="stat-info">
                            <h3 id="statVentasHoy">$0</h3>
                            <p>Ventas Hoy</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ‘¥</div>
                        <div class="stat-info">
                            <h3 id="statDeudores">0</h3>
                            <p>Deudores Activos</p>
                        </div>
                    </div>
                </div>

                <div class="stats-grid" style="margin-top:1rem;">
                    <div class="stat-card">
                        <div class="stat-icon yellow">âš ï¸</div>
                        <div class="stat-info">
                            <h3 id="statStockBajo">-</h3>
                            <p>Stock Bajo</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">âŒ</div>
                        <div class="stat-info">
                            <h3 id="statAgotados">-</h3>
                            <p>Agotados</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">ğŸ’³</div>
                        <div class="stat-info">
                            <h3 id="statDeudaTotal">$0</h3>
                            <p>Por Cobrar (Deudores)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ­</div>
                        <div class="stat-info">
                            <h3 id="statProveedores">$0</h3>
                            <p>Por Pagar (Proveedores)</p>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="card">
                        <div class="card-header"><h3>ğŸ“Š Stock por Local</h3></div>
                        <div class="card-body"><canvas id="chartStockLocales"></canvas></div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h3>ğŸ“¦ Productos por CategorÃ­a</h3></div>
                        <div class="card-body"><canvas id="chartCategorias"></canvas></div>
                    </div>
                </div>

                <div class="charts-grid" style="margin-top:1rem;">
                    <div class="card">
                        <div class="card-header"><h3>ğŸ’µ Ventas por MÃ©todo de Pago (Hoy)</h3></div>
                        <div class="card-body"><canvas id="chartMetodosPagoDash"></canvas></div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h3>ğŸ“ˆ Ventas Ãšltimos 7 DÃ­as</h3></div>
                        <div class="card-body"><canvas id="chartVentas7Dias"></canvas></div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ESTADÃSTICAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="estadisticasSection" class="section">
                <div class="page-header">
                    <h1>EstadÃ­sticas por Local</h1>
                    <p>AnÃ¡lisis detallado del inventario por sede</p>
                </div>

                <div class="stats-grid" style="margin-bottom:2rem;">
                    <div class="stat-card"><div class="stat-icon blue">ğŸ·ï¸</div><div class="stat-info"><h3 id="totalProductosGlobal">-</h3><p>Productos en CatÃ¡logo</p></div></div>
                    <div class="stat-card"><div class="stat-icon green">ğŸ“¦</div><div class="stat-info"><h3 id="totalUnidadesGlobal">-</h3><p>Unidades Totales</p></div></div>
                    <div class="stat-card"><div class="stat-icon orange">ğŸ’°</div><div class="stat-info"><h3 id="valorInventarioGlobal">-</h3><p>Valor Inventario</p></div></div>
                    <div class="stat-card"><div class="stat-icon red">ğŸš¨</div><div class="stat-info"><h3 id="alertasGlobal">-</h3><p>Alertas Activas</p></div></div>
                </div>

                <div class="locales-grid" id="localesStatsGrid">
                    <div class="loading"><div class="spinner"></div><p>Cargando...</p></div>
                </div>

                <div class="card" style="margin-top:2rem;">
                    <div class="card-header"><h3>ğŸ“ˆ Resumen de Rendimiento por Local</h3></div>
                    <div class="card-body">
                        <div id="resumenRendimiento" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:1.5rem;">
                            <!-- Se llena dinÃ¡micamente -->
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top:1.5rem;">
                    <div class="card-header"><h3>ğŸ·ï¸ DistribuciÃ³n por CategorÃ­a</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead><tr><th>CategorÃ­a</th><th>ğŸª AlcalÃ¡</th><th>ğŸ¬ Local 01</th><th>ğŸ¢ JordÃ¡n</th><th>Total Unidades</th></tr></thead>
                                <tbody id="tbodyDistribucionCategorias"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• REPORTES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="reportesSection" class="section">
                <div class="page-header">
                    <h1>ğŸ“‘ Reportes</h1>
                    <p>Reportes y anÃ¡lisis del negocio</p>
                </div>

                <div class="reports-grid">
                    <div class="report-card">
                        <div class="report-icon">ğŸ“Š</div>
                        <h3>Margen por CategorÃ­a</h3>
                        <p>AnÃ¡lisis de rentabilidad por categorÃ­a de producto</p>
                        <button onclick="cargarReporteMargen()" class="btn btn-primary">Ver Reporte</button>
                    </div>
                    <div class="report-card">
                        <div class="report-icon">ğŸ†</div>
                        <h3>Top Productos</h3>
                        <p>Productos mÃ¡s vendidos por categorÃ­a</p>
                        <button onclick="cargarReporteTop()" class="btn btn-primary">Ver Reporte</button>
                    </div>
                    <div class="report-card">
                        <div class="report-icon">ğŸ’³</div>
                        <h3>Ventas por MÃ©todo</h3>
                        <p>AnÃ¡lisis de mÃ©todos de pago utilizados</p>
                        <button onclick="cargarReporteMetodos()" class="btn btn-primary">Ver Reporte</button>
                    </div>
                    <div class="report-card">
                        <div class="report-icon">ğŸ“ˆ</div>
                        <h3>Ventas por Local</h3>
                        <p>Comparativa de ventas entre locales</p>
                        <button onclick="cargarReporteLocales()" class="btn btn-primary">Ver Reporte</button>
                    </div>
                </div>

                <div id="contenidoReporte" class="card" style="margin-top:2rem; display:none;">
                    <div class="card-header">
                        <h3 id="tituloReporte">Reporte</h3>
                        <button onclick="exportarReporte()" class="btn btn-secondary btn-sm">ğŸ“¥ Exportar</button>
                    </div>
                    <div class="card-body" id="bodyReporte"></div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PRODUCTOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="productosSection" class="section">
                <div class="page-header">
                    <h1>GestiÃ³n de Productos</h1>
                    <p>Administra el catÃ¡logo de productos</p>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormProducto()" class="btn btn-primary">â• Nuevo Producto</button>
                    <button onclick="cargarProductos()" class="btn btn-secondary">ğŸ”„ Recargar</button>
                    <button onclick="exportarProductosExcel()" class="btn btn-success" title="Exportar a Excel">ğŸ“¥ Exportar</button>
                    <div class="search-input">
                        <input type="text" id="buscarProductoAdmin" placeholder="Buscar producto..." oninput="filtrarProductosAdmin()">
                    </div>
                </div>

                <div id="formProducto" class="form-modal">
                    <h3 id="formTituloProducto">â• Nuevo Producto</h3>
                    <input type="hidden" id="productoId">
                            <input type="hidden" id="productoIdProducto">
                    
                    <div class="dropzone" id="dropzoneProducto" onclick="document.getElementById('fileInputProducto').click()">
                        <div class="dropzone-icon">ğŸ“¸</div>
                        <div class="dropzone-text">Arrastra una imagen aquÃ­</div>
                        <div class="dropzone-subtext">o haz clic para seleccionar (JPG, PNG, WebP - Max 5MB)</div>
                        <input type="file" id="fileInputProducto" accept="image/*" style="display:none;" onchange="handleFileSelect(event, 'producto')">
                        <div class="preview-container" id="previewContainerProducto" style="display:none;">
                            <img id="previewProducto" class="preview-image">
                            <button class="remove-preview" onclick="event.stopPropagation(); removerPreview('producto')">Ã—</button>
                        </div>
                    </div>
                    <div class="upload-progress" id="uploadProgressProducto">
                        <div class="progress-bar"><div class="progress-fill" id="progressFillProducto" style="width:0%"></div></div>
                        <div class="progress-text">Subiendo imagen...</div>
                    </div>

                    <div class="form-row">
                        <div class="form-group"><label>Nombre <span class="required">*</span></label><input type="text" id="productoNombre" class="form-control" placeholder="Nombre del producto"></div>
                        <div class="form-group"><label>Referencia</label><input type="text" id="productoReferencia" class="form-control" placeholder="REF-001"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>CategorÃ­a <span class="required">*</span></label>
                            <select id="productoCategoria" class="form-control">
                                <option value="">Seleccionar...</option>
                                <option value="Cascos">Cascos</option>
                                <option value="Guantes">Guantes</option>
                                <option value="Chaquetas">Chaquetas</option>
                                <option value="Botas">Botas</option>
                                <option value="Maleteros">Maleteros</option>
                                <option value="Impermeables">Impermeables</option>
                                <option value="Intercomunicadores">Intercomunicadores</option>
                                <option value="Camaras">CÃ¡maras</option>
                                <option value="Accesorios">Accesorios</option>
                                <option value="Protecciones">Protecciones</option>
                            </select>
                        </div>
                        <div class="form-group"><label>Marca <span class="required">*</span></label><input type="text" id="productoMarca" class="form-control" placeholder="Marca"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Precio Compra</label>
                            <input type="number" id="productoPrecioCompra" class="form-control" placeholder="0" min="0">
                            <p class="form-hint">Costo de adquisiciÃ³n</p>
                        </div>
                        <div class="form-group">
                            <label>Precio Venta <span class="required">*</span></label>
                            <input type="number" id="productoPrecio" class="form-control" placeholder="0" min="0">
                        </div>
                        <div class="form-group">
                            <label>Margen</label>
                            <input type="text" id="productoMargen" class="form-control" readonly placeholder="0%">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Estado</label>
                            <select id="productoEstado" class="form-control">
                                <option value="Activo">Activo</option>
                                <option value="Inactivo">Inactivo</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- ASIGNAR STOCK A TIENDAS -->
                    <div class="form-section" style="background: #f0fdf4; padding: 1rem; border-radius: 0.75rem; margin: 1rem 0; border: 1px solid #bbf7d0;">
                        <h4 style="margin-bottom: 1rem; color: #166534;">ğŸ“¦ Stock por Tienda</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ğŸª AlcalÃ¡</label>
                                <input type="number" id="stockAlcala" class="form-control" placeholder="0" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>ğŸ¬ Local 01</label>
                                <input type="number" id="stockLocal01" class="form-control" placeholder="0" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>ğŸ¢ JordÃ¡n</label>
                                <input type="number" id="stockJordan" class="form-control" placeholder="0" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>ğŸŒ Digital</label>
                                <input type="number" id="stockDigital" class="form-control" placeholder="0" min="0" value="0">
                            </div>
                        </div>
                        <p class="form-hint">ğŸ’¡ Ingresa la cantidad inicial de stock en cada tienda</p>
                    </div>
                    
                    <div class="form-group"><label>DescripciÃ³n corta</label><textarea id="productoDescCorta" class="form-control" rows="2" placeholder="DescripciÃ³n breve"></textarea></div>
                    <div class="form-group"><label>DescripciÃ³n tÃ©cnica</label><textarea id="productoDescTecnica" class="form-control" rows="3" placeholder="CaracterÃ­sticas tÃ©cnicas"></textarea></div>
                    <div class="form-group"><label>URL Imagen (alternativa)</label><input type="url" id="productoImagen" class="form-control" placeholder="https://..."><p class="form-hint">Si no subes imagen, puedes pegar una URL directa</p></div>
                    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                        <button onclick="guardarProducto()" class="btn btn-success">ğŸ’¾ Guardar</button>
                        <button onclick="cancelarFormProducto()" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>

                <div id="listaProductos" class="productos-admin-grid">
                    <div class="loading"><div class="spinner"></div><p>Cargando productos...</p></div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DESTACADOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="destacadosSection" class="section">
                <div class="page-header">
                    <h1>â­ Productos Destacados</h1>
                    <p>Selecciona los productos que aparecerÃ¡n en la pÃ¡gina de inicio</p>
                </div>

                <div class="destacados-info">
                    <span class="destacados-info-icon">ğŸ’¡</span>
                    <div class="destacados-info-text">
                        <h4>Â¿CÃ³mo funciona?</h4>
                        <p>Selecciona hasta <strong>8 productos</strong> del panel izquierdo.</p>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="cargarDestacadosAdmin()" class="btn btn-secondary">ğŸ”„ Recargar</button>
                    <span id="contadorDestacados" style="margin-left: auto; font-weight: 600; color: var(--gray-600);"></span>
                </div>

                <div class="destacados-layout">
                    <div class="destacados-panel">
                        <div class="destacados-panel-header">
                            <h3>ğŸ“¦ Productos Disponibles</h3>
                            <span class="contador" id="contadorDisponibles">0</span>
                        </div>
                        <div class="destacados-search">
                            <input type="text" id="buscarDestacado" placeholder="ğŸ” Buscar producto..." oninput="filtrarProductosDestacados()">
                        </div>
                        <div class="destacados-panel-body" id="listaProductosDisponibles">
                            <div class="loading"><div class="spinner"></div><p>Cargando...</p></div>
                        </div>
                    </div>

                    <div class="destacados-panel" style="border: 2px solid var(--primary);">
                        <div class="destacados-panel-header" style="background: linear-gradient(135deg, #fff7ed, #ffedd5);">
                            <h3 style="color: var(--primary);">â­ Destacados Activos</h3>
                            <span class="contador" id="contadorActivos">0 / 8</span>
                        </div>
                        <div class="destacados-panel-body" id="listaDestacadosActivos">
                            <div class="destacados-empty">
                                <div class="destacados-empty-icon">â­</div>
                                <h4>Sin productos destacados</h4>
                                <p>Haz clic en "Agregar" en un producto del panel izquierdo</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VENTAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="ventasSection" class="section">
                <div class="page-header">
                    <h1>GestiÃ³n de Ventas</h1>
                    <p>Acceso a puntos de venta y reportes</p>
                </div>

                <div class="pos-grid">
                    <div class="pos-card"><div class="pos-icon">ğŸª</div><h3>Tienda AlcalÃ¡</h3><p>Registro de ventas y control de caja</p><a href="tienda-alcala.html" target="_blank" class="btn btn-primary btn-lg">Abrir POS</a></div>
                    <div class="pos-card"><div class="pos-icon">ğŸ¬</div><h3>Tienda Local 01</h3><p>Registro de ventas y control de caja</p><a href="tienda-01.html" target="_blank" class="btn btn-success btn-lg">Abrir POS</a></div>
                    <div class="pos-card"><div class="pos-icon">ğŸ¢</div><h3>Tienda JordÃ¡n</h3><p>Registro de ventas y control de caja</p><a href="tienda-jordan.html" target="_blank" class="btn btn-info btn-lg">Abrir POS</a></div>
                    <div class="pos-card" style="border: 2px solid var(--primary);"><div class="pos-icon">ğŸŒ</div><h3>Tienda Digital</h3><p>Ventas online y envÃ­os</p><a href="tienda-digital.html" target="_blank" class="btn btn-warning btn-lg">Abrir POS Digital</a></div>
                </div>

                <div class="card" style="margin-top:2rem;">
                    <div class="card-header">
                        <h3>ğŸ“Š Ventas del DÃ­a</h3>
                        <div><span id="fechaHoy" style="color:var(--gray-500); margin-right:1rem;"></span><button onclick="exportarVentasDia()" class="btn btn-secondary btn-sm">ğŸ“¥ Exportar CSV</button></div>
                    </div>
                    <div class="card-body">
                        <div class="stats-grid" id="ventasDiaStats"><div class="loading"><div class="spinner"></div><p>Cargando ventas...</p></div></div>
                        <div class="charts-grid" style="margin-top:2rem;">
                            <div class="card"><div class="card-header"><h4>ğŸ’³ Por MÃ©todo de Pago</h4></div><div class="card-body"><canvas id="chartMetodosPago"></canvas></div></div>
                            <div class="card"><div class="card-header"><h4>ğŸª Por Local</h4></div><div class="card-body"><canvas id="chartVentasLocales"></canvas></div></div>
                        </div>
                        <div class="table-container" style="margin-top:2rem;">
                            <table class="data-table">
                                <thead><tr><th>Hora</th><th>Local</th><th>Producto</th><th>Cant.</th><th>Total</th><th>MÃ©todo</th></tr></thead>
                                <tbody id="tbodyVentasDia"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INVENTARIO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="inventarioSection" class="section">
                <div class="page-header"><h1>GestiÃ³n de Inventario</h1><p>Controla el stock de cada local</p></div>
                <div class="actions-bar">
                    <select id="inventarioLocal" class="form-control" style="max-width:300px;" onchange="cargarInventarioLocal()">
                        <option value="">-- Seleccionar Local --</option>
                        <option value="inventario_alcala">ğŸª AlcalÃ¡</option>
                        <option value="inventario_01">ğŸ¬ Local 01</option>
                        <option value="inventario_jordan">ğŸ¢ JordÃ¡n</option>
                        <option value="inventario_digital">ğŸŒ Digital</option>
                    </select>
                    <button onclick="cargarInventarioLocal()" class="btn btn-secondary">ğŸ”„ Recargar</button>
                    <button onclick="exportarInventario()" class="btn btn-primary">ğŸ“¥ Exportar CSV</button>
                </div>
                <div id="contenidoInventario" class="card"><div class="card-body"><div class="alert alert-info">ğŸ‘† Selecciona un local para ver su inventario</div></div></div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BODEGAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="bodegasSection" class="section">
                <div class="page-header">
                    <h1>ğŸ­ GestiÃ³n de Bodegas</h1>
                    <p>Control de inventario en bodegas</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸ­</div>
                        <div class="stat-info">
                            <h3 id="totalBodegas">4</h3>
                            <p>Bodegas Activas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">ğŸ“¦</div>
                        <div class="stat-info">
                            <h3 id="totalItemsBodega">0</h3>
                            <p>Items en Bodega</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ”„</div>
                        <div class="stat-info">
                            <h3 id="movimientosMes">0</h3>
                            <p>Movimientos del Mes</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormMovimiento()" class="btn btn-primary">â• Nuevo Movimiento</button>
                    <select id="bodegaFiltro" class="form-control" style="max-width:200px;" onchange="cargarBodega()">
                        <option value="">Todas las bodegas</option>
                        <option value="Alcala">ğŸª Bodega AlcalÃ¡</option>
                        <option value="01">ğŸ¬ Bodega Local 01</option>
                        <option value="Jordan">ğŸ¢ Bodega JordÃ¡n</option>
                        <option value="Digital">ğŸŒ Bodega Digital</option>
                    </select>
                    <button onclick="cargarBodega()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“‹ Inventario de Bodegas</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Bodega</th>
                                        <th>Producto</th>
                                        <th>Cantidad</th>
                                        <th>UbicaciÃ³n</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyBodegas">
                                    <tr><td colspan="5" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ALERTAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="alertasSection" class="section">
                <div class="page-header"><h1>Alertas de Stock</h1><p>Productos que requieren atenciÃ³n</p></div>
                <div class="actions-bar"><button onclick="cargarAlertasStock()" class="btn btn-secondary">ğŸ”„ Actualizar</button></div>
                <div id="contenidoAlertas" class="card"><div class="card-body"><div class="loading"><div class="spinner"></div><p>Cargando alertas...</p></div></div></div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CIERRES DE CAJA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="cierresSection" class="section">
                <div class="page-header">
                    <h1>ğŸ’µ Cierres de Caja</h1>
                    <p>Control de apertura y cierre de caja por tienda</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon green">ğŸª</div>
                        <div class="stat-info">
                            <h3 id="cierresAlcalaHoy">-</h3>
                            <p>AlcalÃ¡ Hoy</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸ¬</div>
                        <div class="stat-info">
                            <h3 id="cierres01Hoy">-</h3>
                            <p>Local 01 Hoy</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ¢</div>
                        <div class="stat-info">
                            <h3 id="cierresJordanHoy">-</h3>
                            <p>JordÃ¡n Hoy</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">âš ï¸</div>
                        <div class="stat-info">
                            <h3 id="cierresDiferencias">-</h3>
                            <p>Con Diferencias</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <select id="cierresLocalFiltro" class="form-control" style="max-width:200px;" onchange="cargarCierresCaja()">
                        <option value="">Todos los locales</option>
                        <option value="Alcala">ğŸª AlcalÃ¡</option>
                        <option value="01">ğŸ¬ Local 01</option>
                        <option value="Jordan">ğŸ¢ JordÃ¡n</option>
                    </select>
                    <input type="date" id="cierresFechaFiltro" class="form-control" style="max-width:180px;" onchange="cargarCierresCaja()">
                    <button onclick="cargarCierresCaja()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                    <button onclick="exportarCierres()" class="btn btn-primary">ğŸ“¥ Exportar</button>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“Š Historial de Cierres</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Local</th>
                                        <th>Vendedor</th>
                                        <th>Ventas Sistema</th>
                                        <th>Efectivo Contado</th>
                                        <th>Diferencia</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyCierres">
                                    <tr><td colspan="8" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• GASTOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="gastosSection" class="section">
                <div class="page-header">
                    <h1>ğŸ’¸ Gastos por Tienda</h1>
                    <p>Registro y control de gastos operativos</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ’¸</div>
                        <div class="stat-info">
                            <h3 id="gastosMesTotal">$0</h3>
                            <p>Gastos del Mes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">ğŸª</div>
                        <div class="stat-info">
                            <h3 id="gastosAlcala">$0</h3>
                            <p>AlcalÃ¡</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸ¬</div>
                        <div class="stat-info">
                            <h3 id="gastos01">$0</h3>
                            <p>Local 01</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ¢</div>
                        <div class="stat-info">
                            <h3 id="gastosJordan">$0</h3>
                            <p>JordÃ¡n</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormGasto()" class="btn btn-primary">â• Registrar Gasto</button>
                    <select id="gastosLocalFiltro" class="form-control" style="max-width:200px;" onchange="cargarGastos()">
                        <option value="">Todos los locales</option>
                        <option value="Alcala">ğŸª AlcalÃ¡</option>
                        <option value="01">ğŸ¬ Local 01</option>
                        <option value="Jordan">ğŸ¢ JordÃ¡n</option>
                    </select>
                    <button onclick="cargarGastos()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <div id="formGasto" class="form-modal" style="display:none;">
                    <h3>â• Registrar Gasto</h3>
                    <input type="hidden" id="gastoId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Local <span class="required">*</span></label>
                            <select id="gastoLocal" class="form-control" required>
                                <option value="">Seleccionar...</option>
                                <option value="Alcala">ğŸª AlcalÃ¡</option>
                                <option value="01">ğŸ¬ Local 01</option>
                                <option value="Jordan">ğŸ¢ JordÃ¡n</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>CategorÃ­a <span class="required">*</span></label>
                            <select id="gastoCategoria" class="form-control" required>
                                <option value="">Seleccionar...</option>
                                <option value="1">Productos de Aseo</option>
                                <option value="2">PapelerÃ­a</option>
                                <option value="3">Servicios PÃºblicos</option>
                                <option value="4">Arriendo</option>
                                <option value="5">Mantenimiento</option>
                                <option value="6">Transporte</option>
                                <option value="7">AlimentaciÃ³n</option>
                                <option value="8">Publicidad</option>
                                <option value="9">NÃ³mina</option>
                                <option value="10">Otros</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>DescripciÃ³n <span class="required">*</span></label>
                        <input type="text" id="gastoDescripcion" class="form-control" placeholder="Ej: Resma de papel, productos de aseo..." required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Monto <span class="required">*</span></label>
                            <input type="number" id="gastoMonto" class="form-control" placeholder="0" required>
                        </div>
                        <div class="form-group">
                            <label>MÃ©todo de Pago</label>
                            <select id="gastoMetodo" class="form-control">
                                <option value="efectivo">Efectivo</option>
                                <option value="transferencia">Transferencia</option>
                                <option value="tarjeta">Tarjeta</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Fecha</label>
                            <input type="date" id="gastoFecha" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Registrado por</label>
                            <input type="text" id="gastoRegistradoPor" class="form-control" placeholder="Nombre">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notas adicionales</label>
                        <textarea id="gastoNotas" class="form-control" rows="2" placeholder="Observaciones..."></textarea>
                    </div>
                    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                        <button onclick="guardarGasto()" class="btn btn-success">ğŸ’¾ Guardar</button>
                        <button onclick="cancelarFormGasto()" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“‹ Registro de Gastos</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Local</th>
                                        <th>CategorÃ­a</th>
                                        <th>DescripciÃ³n</th>
                                        <th>Monto</th>
                                        <th>MÃ©todo</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyGastos">
                                    <tr><td colspan="7" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DEUDORES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="deudoresSection" class="section">
                <div class="page-header">
                    <h1>ğŸ‘¥ GestiÃ³n de Deudores</h1>
                    <p>Control de clientes con deudas pendientes</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ’°</div>
                        <div class="stat-info">
                            <h3 id="deudoresTotalDeuda">$0</h3>
                            <p>Deuda Total</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ‘¥</div>
                        <div class="stat-info">
                            <h3 id="deudoresActivos">0</h3>
                            <p>Deudores Activos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon yellow">âš ï¸</div>
                        <div class="stat-info">
                            <h3 id="deudoresMora">0</h3>
                            <p>En Mora (+30 dÃ­as)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">âœ…</div>
                        <div class="stat-info">
                            <h3 id="deudoresCerrados">0</h3>
                            <p>Pagados Este Mes</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormDeudor()" class="btn btn-primary">â• Nuevo Deudor</button>
                    <select id="deudoresEstadoFiltro" class="form-control" style="max-width:180px;" onchange="cargarDeudores()">
                        <option value="ABIERTO">ğŸ”´ Abiertos</option>
                        <option value="CERRADO">ğŸŸ¢ Cerrados</option>
                        <option value="">Todos</option>
                    </select>
                    <select id="deudoresLocalFiltro" class="form-control" style="max-width:180px;" onchange="cargarDeudores()">
                        <option value="">Todas las sedes</option>
                        <option value="AlcalÃ¡">AlcalÃ¡</option>
                        <option value="Cero1">Cero1 / Local 01</option>
                        <option value="JordÃ¡n">JordÃ¡n</option>
                    </select>
                    <input type="text" id="deudoresBuscar" class="form-control" placeholder="ğŸ” Buscar..." style="max-width:200px;" oninput="buscarDeudores()">
                    <button onclick="cargarDeudores()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <div id="formDeudor" class="form-modal" style="display:none;">
                    <h3 id="formTituloDeudor">â• Nuevo Deudor</h3>
                    <input type="hidden" id="deudorId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nombre Completo <span class="required">*</span></label>
                            <input type="text" id="deudorNombre" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>TelÃ©fono <span class="required">*</span></label>
                            <input type="tel" id="deudorTelefono" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Sede de Venta <span class="required">*</span></label>
                            <select id="deudorSede" class="form-control" required>
                                <option value="">Seleccionar...</option>
                                <option value="AlcalÃ¡">AlcalÃ¡</option>
                                <option value="Cero1">Cero1 / Local 01</option>
                                <option value="JordÃ¡n">JordÃ¡n</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Fecha de Compra</label>
                            <input type="date" id="deudorFecha" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>DescripciÃ³n de la Compra <span class="required">*</span></label>
                        <textarea id="deudorDescripcion" class="form-control" rows="2" required placeholder="Ej: Casco Shaft 526, Guantes..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Monto Total <span class="required">*</span></label>
                            <input type="number" id="deudorMontoOriginal" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Saldo Actual <span class="required">*</span></label>
                            <input type="number" id="deudorSaldo" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Contacto de Referencia</label>
                        <input type="text" id="deudorReferencia" class="form-control" placeholder="Persona que respalda">
                    </div>
                    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                        <button onclick="guardarDeudor()" class="btn btn-success">ğŸ’¾ Guardar</button>
                        <button onclick="cancelarFormDeudor()" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“‹ Lista de Deudores</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Cliente</th>
                                        <th>TelÃ©fono</th>
                                        <th>Sede</th>
                                        <th>DescripciÃ³n</th>
                                        <th>Monto Original</th>
                                        <th>Saldo</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyDeudores">
                                    <tr><td colspan="8" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PROVEEDORES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="proveedoresSection" class="section">
                <div class="page-header">
                    <h1>ğŸ­ GestiÃ³n de Proveedores</h1>
                    <p>Administra proveedores</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸ­</div>
                        <div class="stat-info">
                            <h3 id="proveedoresTotal">0</h3>
                            <p>Proveedores</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">âœ…</div>
                        <div class="stat-info">
                            <h3 id="proveedoresActivos">0</h3>
                            <p>Activos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ’°</div>
                        <div class="stat-info">
                            <h3 id="proveedoresSaldoPendiente">$0</h3>
                            <p>Saldo Pendiente</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormProveedor()" class="btn btn-primary">â• Nuevo Proveedor</button>
                    <input type="text" id="proveedoresBuscar" class="form-control" placeholder="ğŸ” Buscar proveedor..." style="max-width:250px;" oninput="buscarProveedores()">
                    <button onclick="cargarProveedores()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <div id="formProveedor" class="form-modal" style="display:none;">
                    <h3 id="formTituloProveedor">â• Nuevo Proveedor</h3>
                    <input type="hidden" id="proveedorId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>RazÃ³n Social / Nombre <span class="required">*</span></label>
                            <input type="text" id="proveedorNombre" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>NIT</label>
                            <input type="text" id="proveedorNit" class="form-control">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Contacto</label>
                            <input type="text" id="proveedorContacto" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>TelÃ©fono</label>
                            <input type="tel" id="proveedorTelefono" class="form-control">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>CondiciÃ³n de Pago</label>
                            <select id="proveedorCondicion" class="form-control">
                                <option value="contado">Contado</option>
                                <option value="credito_15">CrÃ©dito 15 dÃ­as</option>
                                <option value="credito_30">CrÃ©dito 30 dÃ­as</option>
                                <option value="credito_60">CrÃ©dito 60 dÃ­as</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="proveedorEmail" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notas</label>
                        <textarea id="proveedorNotas" class="form-control" rows="2"></textarea>
                    </div>
                    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                        <button onclick="guardarProveedor()" class="btn btn-success">ğŸ’¾ Guardar</button>
                        <button onclick="cancelarFormProveedor()" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ­ Lista de Proveedores</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Proveedor</th>
                                        <th>Contacto</th>
                                        <th>TelÃ©fono</th>
                                        <th>CondiciÃ³n</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyProveedores">
                                    <tr><td colspan="6" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• COMPRAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="comprasSection" class="section">
                <div class="page-header">
                    <h1>ğŸ›’ Compras a Proveedores</h1>
                    <p>Control de compras y pagos a proveedores</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ’°</div>
                        <div class="stat-info">
                            <h3 id="comprasPendientes">$0</h3>
                            <p>Por Pagar</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ“‹</div>
                        <div class="stat-info">
                            <h3 id="comprasAbiertas">0</h3>
                            <p>Compras Abiertas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">âœ…</div>
                        <div class="stat-info">
                            <h3 id="comprasPagadasMes">0</h3>
                            <p>Pagadas Este Mes</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormCompra()" class="btn btn-primary">â• Nueva Compra</button>
                    <select id="comprasEstadoFiltro" class="form-control" style="max-width:180px;" onchange="cargarCompras()">
                        <option value="">Todas</option>
                        <option value="ABIERTO">ğŸ”´ Pendientes</option>
                        <option value="CERRADO">ğŸŸ¢ Cerradas</option>
                    </select>
                    <input type="text" id="comprasBuscar" class="form-control" placeholder="ğŸ” Buscar proveedor..." style="max-width:200px;" oninput="buscarCompras()">
                    <button onclick="cargarCompras()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <!-- FORMULARIO MODAL NUEVA COMPRA -->
                <div id="formCompra" class="form-modal" style="display:none;">
                    <h3 id="formTituloCompra">â• Nueva Compra a Proveedor</h3>
                    <input type="hidden" id="compraId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>AÃ±o <span class="required">*</span></label>
                            <select id="compraAnio" class="form-control" required>
                                <option value="2024">2024</option>
                                <option value="2025" selected>2025</option>
                                <option value="2026">2026</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Mes Compra <span class="required">*</span></label>
                            <select id="compraMes" class="form-control" required>
                                <option value="">Seleccionar...</option>
                                <option value="01.ENE">01.ENE</option>
                                <option value="02.FEB">02.FEB</option>
                                <option value="03.MAR">03.MAR</option>
                                <option value="04.ABR">04.ABR</option>
                                <option value="05.MAY">05.MAY</option>
                                <option value="06.JUN">06.JUN</option>
                                <option value="07.JUL">07.JUL</option>
                                <option value="08.AGO">08.AGO</option>
                                <option value="09.SEP">09.SEP</option>
                                <option value="10.OCT">10.OCT</option>
                                <option value="11.NOV">11.NOV</option>
                                <option value="12.DIC">12.DIC</option>
                                <option value="ANTIGUO">ANTIGUO</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>DÃ­a</label>
                            <input type="number" id="compraDia" class="form-control" placeholder="1-31" min="1" max="31">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Cuenta</label>
                            <select id="compraCuenta" class="form-control">
                                <option value="">Sin asignar</option>
                                <option value="GLO">GLO</option>
                                <option value="CLAU">CLAU</option>
                                <option value="EFECTIVO">EFECTIVO</option>
                                <option value="CREDITO">CREDITO</option>
                            </select>
                        </div>
                        <div class="form-group" style="flex:2;">
                            <label>Proveedor <span class="required">*</span></label>
                            <input type="text" id="compraProveedor" class="form-control" list="listaProveedoresDatalist" placeholder="Nombre del proveedor" required>
                            <datalist id="listaProveedoresDatalist"></datalist>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label># Factura</label>
                            <input type="text" id="compraFactura" class="form-control" placeholder="NÃºmero de factura">
                        </div>
                        <div class="form-group">
                            <label>Fecha Vencimiento</label>
                            <input type="date" id="compraVencimiento" class="form-control">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Consecutivo Moteros</label>
                            <input type="text" id="compraConsecutivo" class="form-control" placeholder="Ej: 1001">
                        </div>
                        <div class="form-group">
                            <label>Valor Compra <span class="required">*</span></label>
                            <input type="text" id="compraValor" class="form-control" placeholder="$0" oninput="formatearMonedaInput(this)" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Factura ElectrÃ³nica</label>
                            <select id="compraFElectronica" class="form-control">
                                <option value="">No</option>
                                <option value="SI">SÃ­</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Estado</label>
                            <select id="compraEstado" class="form-control">
                                <option value="ABIERTO">ğŸ”´ ABIERTO (Pendiente)</option>
                                <option value="CERRADO">ğŸŸ¢ CERRADO (Pagado)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Notas</label>
                        <textarea id="compraNotas" class="form-control" rows="2" placeholder="Observaciones adicionales..."></textarea>
                    </div>

                    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                        <button onclick="guardarCompra()" class="btn btn-success">ğŸ’¾ Guardar Compra</button>
                        <button onclick="cancelarFormCompra()" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>

                <!-- MODAL REGISTRAR PAGO -->
                <div id="modalPagoCompra" class="modal-overlay" style="display:none;">
                    <div class="modal-content" style="max-width:500px;">
                        <div class="modal-header">
                            <h3>ğŸ’µ Registrar Pago</h3>
                            <button onclick="cerrarModalPago()" class="btn-cerrar">Ã—</button>
                        </div>
                        <div class="modal-body">
                            <input type="hidden" id="pagoCompraId">
                            <div class="alert alert-info" style="margin-bottom:1rem;">
                                <strong>Proveedor:</strong> <span id="pagoProveedorNombre">-</span><br>
                                <strong>Factura:</strong> <span id="pagoFacturaNum">-</span><br>
                                <strong>Saldo Pendiente:</strong> <span id="pagoSaldoPendiente">$0</span>
                            </div>
                            <div class="form-group">
                                <label>Mes del Pago <span class="required">*</span></label>
                                <select id="pagoMes" class="form-control" required>
                                    <option value="">Seleccionar mes...</option>
                                    <option value="pago_ene">Enero 2024</option>
                                    <option value="pago_feb">Febrero 2024</option>
                                    <option value="pago_mar">Marzo 2024</option>
                                    <option value="pago_abr">Abril 2024</option>
                                    <option value="pago_may">Mayo 2024</option>
                                    <option value="pago_jun">Junio 2024</option>
                                    <option value="pago_jul">Julio 2024</option>
                                    <option value="pago_ago">Agosto 2024</option>
                                    <option value="pago_sep">Septiembre 2024</option>
                                    <option value="pago_oct">Octubre 2024</option>
                                    <option value="pago_nov">Noviembre 2024</option>
                                    <option value="pago_dic">Diciembre 2024</option>
                                    <option value="pago_ene_2025">Enero 2025</option>
                                    <option value="pago_feb_2025">Febrero 2025</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Monto del Pago <span class="required">*</span></label>
                                <input type="text" id="pagoMonto" class="form-control" placeholder="$0" oninput="formatearMonedaInput(this)" required>
                            </div>
                            <div class="form-group">
                                <label>Notas</label>
                                <input type="text" id="pagoNotas" class="form-control" placeholder="Referencia o nota del pago">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button onclick="guardarPagoCompra()" class="btn btn-success">ğŸ’¾ Registrar Pago</button>
                            <button onclick="cerrarModalPago()" class="btn btn-secondary">Cancelar</button>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“‹ Lista de Compras</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Cuenta</th>
                                        <th>Proveedor</th>
                                        <th># Factura</th>
                                        <th>Valor</th>
                                        <th>Saldo</th>
                                        <th>Vencimiento</th>
                                        <th>F.Elec</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyCompras">
                                    <tr><td colspan="10" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DEUDAS DEL NEGOCIO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="deudasSection" class="section">
                <div class="page-header">
                    <h1>ğŸ“‹ Deudas del Negocio</h1>
                    <p>Control de prÃ©stamos y obligaciones financieras</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ’°</div>
                        <div class="stat-info">
                            <h3 id="deudasTotalSaldo">$0</h3>
                            <p>Saldo Total</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ“Š</div>
                        <div class="stat-info">
                            <h3 id="deudasMontoOriginal">$0</h3>
                            <p>Monto Original</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">ğŸ’µ</div>
                        <div class="stat-info">
                            <h3 id="deudasPagado">$0</h3>
                            <p>Total Pagado</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸ“‹</div>
                        <div class="stat-info">
                            <h3 id="deudasActivas">0</h3>
                            <p>Deudas Activas</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormDeuda()" class="btn btn-primary">â• Nueva Deuda</button>
                    <button onclick="cargarDeudasNegocio()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <div id="formDeuda" class="form-modal" style="display:none;">
                    <h3>â• Registrar Deuda/PrÃ©stamo</h3>
                    <input type="hidden" id="deudaId">
                    <div class="form-group">
                        <label>Concepto <span class="required">*</span></label>
                        <input type="text" id="deudaConcepto" class="form-control" placeholder="Ej: PrÃ©stamo compra MT" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>NÃºmero de Factura</label>
                            <input type="text" id="deudaFactura" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Acreedor</label>
                            <input type="text" id="deudaAcreedor" class="form-control" placeholder="A quiÃ©n se debe">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Monto Original <span class="required">*</span></label>
                            <input type="number" id="deudaMontoOriginal" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Saldo Actual <span class="required">*</span></label>
                            <input type="number" id="deudaSaldo" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notas</label>
                        <textarea id="deudaNotas" class="form-control" rows="2"></textarea>
                    </div>
                    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                        <button onclick="guardarDeudaNegocio()" class="btn btn-success">ğŸ’¾ Guardar</button>
                        <button onclick="cancelarFormDeuda()" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“‹ Lista de Deudas</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Concepto</th>
                                        <th># Factura</th>
                                        <th>Acreedor</th>
                                        <th>Monto Original</th>
                                        <th>Saldo Actual</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyDeudas">
                                    <tr><td colspan="7" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CRÃ‰DITO MOTERO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="creditosSection" class="section">
                <div class="page-header">
                    <h1>ğŸï¸ CrÃ©dito Motero</h1>
                    <p>GestiÃ³n de crÃ©ditos a clientes</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ’³</div>
                        <div class="stat-info">
                            <h3 id="creditosActivos">0</h3>
                            <p>CrÃ©ditos Activos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ’°</div>
                        <div class="stat-info">
                            <h3 id="creditosSaldoTotal">$0</h3>
                            <p>Saldo por Cobrar</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon yellow">âš ï¸</div>
                        <div class="stat-info">
                            <h3 id="creditosMora">0</h3>
                            <p>En Mora</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">âœ…</div>
                        <div class="stat-info">
                            <h3 id="creditosPagados">0</h3>
                            <p>Pagados</p>
                        </div>
                    </div>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormCredito()" class="btn btn-primary">â• Nuevo CrÃ©dito</button>
                    <select id="creditosEstadoFiltro" class="form-control" style="max-width:180px;" onchange="cargarCreditos()">
                        <option value="" selected>ğŸ“‹ Todos</option>
                        <option value="activo">ğŸŸ¡ Activos</option>
                        <option value="mora">ğŸ”´ En Mora</option>
                        <option value="pagado">ğŸŸ¢ Pagados</option>
                    </select>
                    <button onclick="cargarCreditos()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“‹ CrÃ©ditos</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Cliente</th>
                                        <th>TelÃ©fono</th>
                                        <th>Monto Total</th>
                                        <th>Saldo</th>
                                        <th>Cuotas</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyCreditos">
                                    <tr><td colspan="7" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PROMOCIONES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="promocionesSection" class="section">
                <div class="page-header"><h1>GestiÃ³n de Promociones</h1><p>Administra ofertas y descuentos</p></div>
                <div class="actions-bar">
                    <button onclick="mostrarFormPromocion()" class="btn btn-primary">â• Nueva PromociÃ³n</button>
                    <button onclick="cargarPromociones()" class="btn btn-secondary">ğŸ”„ Recargar</button>
                </div>

                <!-- Modal de PromociÃ³n a Pantalla Completa -->
                <div id="formPromocion" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.8); z-index:9999; overflow-y:auto; padding:1rem;">
                    <div style="background:white; border-radius:1rem; max-width:1400px; margin:0 auto; min-height:calc(100vh - 2rem); display:flex; flex-direction:column;">
                        <!-- Header del Modal -->
                        <div style="background:linear-gradient(135deg,#ff6b00,#ff8533); color:white; padding:1.25rem 2rem; border-radius:1rem 1rem 0 0; display:flex; justify-content:space-between; align-items:center;">
                            <h3 id="formTituloPromocion" style="margin:0; font-size:1.5rem;">â• Nueva PromociÃ³n</h3>
                            <button onclick="cancelarFormPromocion()" style="background:rgba(255,255,255,0.2); border:none; color:white; width:40px; height:40px; border-radius:50%; font-size:1.5rem; cursor:pointer;">&times;</button>
                        </div>
                        <input type="hidden" id="promocionIdOriginal">

                        <!-- Contenido en 2 columnas -->
                        <div style="display:grid; grid-template-columns:380px 1fr; flex:1; overflow:hidden;">

                            <!-- Columna Izquierda: Datos de la Promo -->
                            <div style="padding:1.5rem; border-right:1px solid #e2e8f0; overflow-y:auto; background:#f8fafc;">
                                <h4 style="color:#1e293b; margin-bottom:1.25rem; font-size:1.1rem;">ğŸ“‹ Datos de la PromociÃ³n</h4>

                                <div class="form-group" style="margin-bottom:1rem;">
                                    <label style="font-weight:600; color:#374151; font-size:0.9rem;">ID PromociÃ³n <span style="color:#ef4444;">*</span></label>
                                    <input type="text" id="promocionId" class="form-control" placeholder="PROMO06" style="margin-top:0.25rem;">
                                </div>
                                <div class="form-group" style="margin-bottom:1rem;">
                                    <label style="font-weight:600; color:#374151; font-size:0.9rem;">Nombre <span style="color:#ef4444;">*</span></label>
                                    <input type="text" id="promocionNombre" class="form-control" placeholder="Ej: Cascos al 20%" style="margin-top:0.25rem;">
                                </div>
                                <div class="form-group" style="margin-bottom:1rem;">
                                    <label style="font-weight:600; color:#374151; font-size:0.9rem;">Descuento (%) <span style="color:#ef4444;">*</span></label>
                                    <input type="number" id="promocionDescuento" class="form-control" placeholder="20" min="1" max="100" style="margin-top:0.25rem; font-size:1.25rem; font-weight:700; color:#ff6b00;">
                                </div>
                                <div class="form-group" style="margin-bottom:1rem;">
                                    <label style="font-weight:600; color:#374151; font-size:0.9rem;">Locales Aplicables</label>
                                    <input type="text" id="promocionLocales" class="form-control" placeholder="Todos" style="margin-top:0.25rem;">
                                </div>
                                <div style="display:grid; grid-template-columns:1fr 1fr; gap:0.75rem; margin-bottom:1rem;">
                                    <div class="form-group">
                                        <label style="font-weight:600; color:#374151; font-size:0.9rem;">Fecha Inicio</label>
                                        <input type="date" id="promocionInicio" class="form-control" style="margin-top:0.25rem;">
                                    </div>
                                    <div class="form-group">
                                        <label style="font-weight:600; color:#374151; font-size:0.9rem;">Fecha Fin</label>
                                        <input type="date" id="promocionFin" class="form-control" style="margin-top:0.25rem;">
                                    </div>
                                </div>
                                <div class="form-group" style="margin-bottom:1.5rem;">
                                    <label style="font-weight:600; color:#374151; font-size:0.9rem;">Estado</label>
                                    <select id="promocionEstado" class="form-control" style="margin-top:0.25rem;">
                                        <option value="Activa">ğŸŸ¢ Activa</option>
                                        <option value="Inactiva">ğŸŸ¡ Inactiva</option>
                                        <option value="Finalizada">ğŸ”´ Finalizada</option>
                                    </select>
                                </div>

                                <!-- Vista Previa -->
                                <div style="background:linear-gradient(135deg,#fff7ed,#ffedd5); border:2px dashed #fb923c; border-radius:0.75rem; padding:1rem; margin-bottom:1rem;">
                                    <p style="font-size:0.8rem; color:#9a3412; margin-bottom:0.5rem; font-weight:600;">ğŸ‘ï¸ Vista Previa</p>
                                    <div id="previewPromo" style="background:white; padding:1rem; border-radius:0.5rem; text-align:center;">
                                        <p style="font-size:0.9rem; color:#64748b;">Completa los datos para ver la vista previa</p>
                                    </div>
                                </div>

                                <!-- Botones -->
                                <div style="display:flex; gap:0.75rem;">
                                    <button onclick="guardarPromocion()" class="btn btn-success" style="flex:1; padding:0.875rem; font-size:1rem;">ğŸ’¾ Guardar PromociÃ³n</button>
                                    <button onclick="cancelarFormPromocion()" class="btn btn-secondary" style="padding:0.875rem;">Cancelar</button>
                                </div>
                            </div>

                            <!-- Columna Derecha: SelecciÃ³n de Productos -->
                            <div style="padding:1.5rem; display:flex; flex-direction:column; overflow:hidden;">
                                <h4 style="color:#1e293b; margin-bottom:1rem; font-size:1.1rem;">ğŸ›’ Seleccionar Productos <span style="color:#ef4444;">*</span></h4>
                                <div id="listaProductosPromo" style="flex:1; overflow:hidden; border:1px solid #e2e8f0; border-radius:0.75rem; background:#fafafa;">
                                    <div class="loading"><div class="spinner"></div><p>Cargando productos...</p></div>
                                </div>
                                <input type="hidden" id="promocionProductos">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="listaPromociones"><div class="loading"><div class="spinner"></div><p>Cargando promociones...</p></div></div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BLOG â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="blogSection" class="section">
                <div class="page-header"><h1>GestiÃ³n del Blog</h1><p>Publica contenido y noticias</p></div>
                <div class="actions-bar">
                    <button onclick="mostrarFormPost()" class="btn btn-primary">â• Nueva PublicaciÃ³n</button>
                    <button onclick="cargarPosts()" class="btn btn-secondary">ğŸ”„ Recargar</button>
                </div>

                <div id="formPost" class="form-modal" style="display:none;">
                    <h3 id="formTituloPost">â• Nueva PublicaciÃ³n</h3>
                    <input type="hidden" id="postId">
                    <div class="dropzone" id="dropzonePost" onclick="document.getElementById('fileInputPost').click()">
                        <div class="dropzone-icon">ğŸ–¼ï¸</div>
                        <div class="dropzone-text">Imagen del post</div>
                        <input type="file" id="fileInputPost" accept="image/*" style="display:none;" onchange="handleFileSelect(event, 'post')">
                        <div class="preview-container" id="previewContainerPost" style="display:none;">
                            <img id="previewPost" class="preview-image">
                            <button class="remove-preview" onclick="event.stopPropagation(); removerPreview('post')">Ã—</button>
                        </div>
                    </div>
                    <div class="form-group"><label>TÃ­tulo <span class="required">*</span></label><input type="text" id="postTitulo" class="form-control" placeholder="TÃ­tulo del post"></div>
                    <div class="form-group"><label>Contenido <span class="required">*</span></label><textarea id="postContenido" class="form-control" rows="6" placeholder="Escribe el contenido..."></textarea></div>
                    <div class="form-group"><label>URL Imagen (alternativa)</label><input type="url" id="postImagenUrl" class="form-control" placeholder="https://..."></div>
                    <div class="form-group"><label>Video (URL TikTok/YouTube)</label><input type="url" id="postVideo" class="form-control" placeholder="https://www.tiktok.com/@usuario/video/123"></div>
                    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                        <button onclick="guardarPost()" class="btn btn-success">ğŸ’¾ Publicar</button>
                        <button onclick="cancelarFormPost()" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>

                <div id="listaPosts" class="productos-admin-grid"><div class="loading"><div class="spinner"></div><p>Cargando publicaciones...</p></div></div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ALIANZAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="alianzasSection" class="section">
                <div class="page-header">
                    <h1>ğŸ¤ Alianzas y Convenios</h1>
                    <p>Gestiona alianzas empresariales y procesadores de pago</p>
                </div>

                <div class="actions-bar">
                    <button onclick="mostrarFormAlianza()" class="btn btn-primary">â• Nueva Alianza</button>
                    <button onclick="cargarAlianzas()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                </div>

                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ¤ Lista de Alianzas</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Tipo</th>
                                        <th>DescripciÃ³n</th>
                                        <th>Contacto</th>
                                        <th>Procesador</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyAlianzas">
                                    <tr><td colspan="7" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONFIGURACIÃ“N â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="configuracionSection" class="section">
                <div class="page-header"><h1>ConfiguraciÃ³n</h1><p>Ajustes generales del sistema</p></div>
                <div class="config-grid">
                    <div class="config-card">
                        <h4>ğŸ–¼ï¸ Branding</h4>
                        <div class="form-group"><label>Logo (URL)</label><input type="url" id="configLogo" class="form-control" placeholder="https://..."></div>
                        <div class="form-group"><label>Nombre de la Tienda</label><input type="text" id="configNombre" class="form-control" placeholder="Moteros Sports Line"></div>
                        <div class="form-group"><label>Slogan</label><input type="text" id="configSlogan" class="form-control" placeholder="Tu estilo, tu pasiÃ³n"></div>
                        <div class="form-group"><label>Color Principal</label><div class="color-picker-group"><input type="color" id="configColor" value="#ff6b00" class="color-preview"></div></div>
                    </div>
                    <div class="config-card">
                        <h4>ğŸ“± Redes Sociales</h4>
                        <div class="form-group"><label>WhatsApp (con cÃ³digo paÃ­s)</label><input type="text" id="configWhatsapp" class="form-control" placeholder="573113408416"></div>
                        <div class="form-group"><label>Facebook</label><input type="url" id="configFacebook" class="form-control" placeholder="https://facebook.com/..."></div>
                        <div class="form-group"><label>Instagram</label><input type="url" id="configInstagram" class="form-control" placeholder="https://instagram.com/..."></div>
                        <div class="form-group"><label>TikTok</label><input type="url" id="configTiktok" class="form-control" placeholder="https://tiktok.com/..."></div>
                    </div>
                    <div class="config-card">
                        <h4>ğŸ“§ Contacto</h4>
                        <div class="form-group"><label>Email principal</label><input type="email" id="configEmail" class="form-control" placeholder="moterossportline@gmail.com"></div>
                        <div class="form-group"><label>TelÃ©fono</label><input type="text" id="configTelefono" class="form-control" placeholder="3113408416"></div>
                        <div class="form-group"><label>DirecciÃ³n principal</label><input type="text" id="configDireccion" class="form-control" placeholder="Calle 123 #45-67"></div>
                    </div>
                    <div class="config-card">
                        <h4>âš™ï¸ Sistema</h4>
                        <div class="form-group"><label>Stock mÃ­nimo por defecto</label><input type="number" id="configStockMinimo" class="form-control" placeholder="5" min="1"></div>
                        <div class="form-group"><label>Moneda</label><select id="configMoneda" class="form-control"><option value="COP">COP - Peso Colombiano</option><option value="USD">USD - DÃ³lar</option></select></div>
                    </div>
                </div>
                <div style="margin-top:2rem;"><button onclick="guardarConfiguracion()" class="btn btn-success btn-lg">ğŸ’¾ Guardar ConfiguraciÃ³n</button></div>

                <!-- GestiÃ³n de Empleados -->
                <div class="card" style="margin-top:2rem;">
                    <div class="card-header" style="display:flex;justify-content:space-between;align-items:center;">
                        <h3>ğŸ‘¥ GestiÃ³n de Empleados</h3>
                        <button onclick="mostrarModalEmpleado()" class="btn btn-primary">â• Nuevo Empleado</button>
                    </div>
                    <div class="card-body">
                        <p style="color:#64748b;margin-bottom:1rem;">Administra los empleados que pueden acceder al POS de cada tienda.</p>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Usuario</th>
                                        <th>CÃ©dula</th>
                                        <th>Cargo</th>
                                        <th>Tiendas</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tablaEmpleados">
                                    <tr><td colspan="7" style="text-align:center;padding:2rem;color:#94a3b8;">Cargando empleados...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- MÃ©todos de Pago -->
                <div class="card" style="margin-top:2rem;">
                    <div class="card-header">
                        <h3>ğŸ’³ MÃ©todos de Pago (PÃ¡gina Web)</h3>
                    </div>
                    <div class="card-body">
                        <p style="color:#64748b;margin-bottom:1rem;">Configura los mÃ©todos de pago que se muestran en la pÃ¡gina principal.</p>
                        <div class="form-group">
                            <label>MÃ©todos de Pago Activos</label>
                            <div style="display:flex;flex-wrap:wrap;gap:1rem;margin-top:0.5rem;">
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                    <input type="checkbox" id="metodoPagoNequi" checked> Nequi
                                </label>
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                    <input type="checkbox" id="metodoPagoDaviplata" checked> Daviplata
                                </label>
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                    <input type="checkbox" id="metodoPagoAddi" checked> Addi
                                </label>
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                    <input type="checkbox" id="metodoPagoSistecredito" checked> Sistecredito
                                </label>
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                    <input type="checkbox" id="metodoPagoFodegas" checked> Fodegas
                                </label>
                            </div>
                        </div>
                        <button onclick="guardarMetodosPago()" class="btn btn-success" style="margin-top:1rem;">ğŸ’¾ Guardar MÃ©todos de Pago</button>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N ENVÃOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="enviosSection" class="section">
                <div class="page-header">
                    <h1>ğŸ“¦ GestiÃ³n de EnvÃ­os</h1>
                    <p>Control y seguimiento de pedidos con envÃ­o a domicilio</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon orange">ğŸ“‹</div>
                        <div class="stat-info">
                            <h3 id="enviosPendientes">0</h3>
                            <p>Pendientes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸšš</div>
                        <div class="stat-info">
                            <h3 id="enviosEnTransito">0</h3>
                            <p>En TrÃ¡nsito</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">âœ…</div>
                        <div class="stat-info">
                            <h3 id="enviosEntregados">0</h3>
                            <p>Entregados (mes)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ”„</div>
                        <div class="stat-info">
                            <h3 id="enviosDevueltos">0</h3>
                            <p>Devoluciones</p>
                        </div>
                    </div>
                </div>

                <!-- Filtros y Acciones -->
                <div class="actions-bar">
                    <select id="enviosEstadoFiltro" class="form-control" style="max-width:180px;" onchange="cargarEnvios()">
                        <option value="">Todos los estados</option>
                        <option value="pendiente">ğŸ“‹ Pendientes</option>
                        <option value="preparando">ğŸ“¦ Preparando</option>
                        <option value="despachado">ğŸšš Despachados</option>
                        <option value="en_transito">ğŸ›£ï¸ En TrÃ¡nsito</option>
                        <option value="entregado">âœ… Entregados</option>
                        <option value="devuelto">ğŸ”„ Devueltos</option>
                    </select>
                    <input type="text" id="enviosBuscar" class="form-control" placeholder="ğŸ” Buscar cliente, guÃ­a..." style="max-width:250px;" oninput="buscarEnvios()">
                    <input type="date" id="enviosFechaFiltro" class="form-control" style="max-width:160px;" onchange="cargarEnvios()">
                    <button onclick="cargarEnvios()" class="btn btn-secondary">ğŸ”„ Actualizar</button>
                    <button onclick="exportarEnvios()" class="btn btn-primary">ğŸ“¥ Exportar</button>
                </div>

                <!-- Tabla de EnvÃ­os -->
                <div class="card" style="margin-top:1rem;">
                    <div class="card-header"><h3>ğŸ“‹ Lista de EnvÃ­os</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Pedido</th>
                                        <th>Fecha</th>
                                        <th>Cliente</th>
                                        <th>Ciudad</th>
                                        <th>Transportadora</th>
                                        <th>GuÃ­a</th>
                                        <th>Total</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyEnvios">
                                    <tr><td colspan="9" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Modal Editar EnvÃ­o -->
                <div id="modalEditarEnvio" class="modal-overlay" style="display:none;">
                    <div class="modal-content" style="max-width:600px;">
                        <div class="modal-header">
                            <h3>ğŸ“¦ Actualizar EnvÃ­o</h3>
                            <button onclick="cerrarModalEnvio()" class="btn-cerrar">Ã—</button>
                        </div>
                        <div class="modal-body">
                            <input type="hidden" id="envioId">
                            
                            <!-- Info del cliente (solo lectura) -->
                            <div class="alert alert-info" style="margin-bottom:1rem;">
                                <strong>Pedido:</strong> <span id="envioNumeroPedido">-</span><br>
                                <strong>Cliente:</strong> <span id="envioClienteNombre">-</span><br>
                                <strong>TelÃ©fono:</strong> <span id="envioClienteTelefono">-</span><br>
                                <strong>DirecciÃ³n:</strong> <span id="envioDireccion">-</span><br>
                                <strong>Ciudad:</strong> <span id="envioCiudad">-</span>
                            </div>

                            <!-- Productos del pedido -->
                            <div class="form-group">
                                <label>ğŸ“¦ Productos</label>
                                <div id="envioProductos" class="alert" style="background:#f8fafc; max-height:100px; overflow-y:auto;">-</div>
                            </div>

                            <hr style="margin: 1rem 0; border-color: #e2e8f0;">

                            <!-- Campos editables -->
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Transportadora</label>
                                    <input type="text" id="envioTransportadora" class="form-control" placeholder="Ej: Servientrega, InterrapidÃ­simo...">
                                </div>
                                <div class="form-group">
                                    <label>NÃºmero de GuÃ­a</label>
                                    <input type="text" id="envioGuia" class="form-control" placeholder="NÃºmero de tracking">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>URL de Rastreo (opcional)</label>
                                <input type="url" id="envioUrlTracking" class="form-control" placeholder="https://...">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Estado del EnvÃ­o</label>
                                    <select id="envioEstado" class="form-control">
                                        <option value="pendiente">ğŸ“‹ Pendiente</option>
                                        <option value="preparando">ğŸ“¦ Preparando</option>
                                        <option value="despachado">ğŸšš Despachado</option>
                                        <option value="en_transito">ğŸ›£ï¸ En TrÃ¡nsito</option>
                                        <option value="entregado">âœ… Entregado</option>
                                        <option value="devuelto">ğŸ”„ Devuelto</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Costo de EnvÃ­o</label>
                                    <input type="number" id="envioCosto" class="form-control" placeholder="0" min="0">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label><input type="checkbox" id="envioIncluidoPrecio"> EnvÃ­o incluido en precio</label>
                                </div>
                                <div class="form-group">
                                    <label><input type="checkbox" id="envioClientePaga" checked> Cliente paga envÃ­o</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Notas</label>
                                <textarea id="envioNotas" class="form-control" rows="2" placeholder="Observaciones..."></textarea>
                            </div>

                            <hr style="margin: 1rem 0; border-color: #e2e8f0;">

                            <!-- NotificaciÃ³n -->
                            <div class="form-group" style="background:#f0fdf4; padding:1rem; border-radius:8px; border:1px solid #bbf7d0;">
                                <label style="color:#166534; font-weight:600;">ğŸ“£ Notificar al Cliente</label>
                                <div style="display:flex; gap:1rem; margin-top:0.5rem;">
                                    <label><input type="checkbox" id="notificarWhatsApp" checked> ğŸ“± WhatsApp</label>
                                    <label><input type="checkbox" id="notificarEmail"> ğŸ“§ Email</label>
                                </div>
                                <div class="form-group" style="margin-top:0.75rem;">
                                    <label>Mensaje personalizado (opcional)</label>
                                    <textarea id="envioMensajePersonalizado" class="form-control" rows="2" placeholder="Dejar vacÃ­o para usar mensaje automÃ¡tico..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button onclick="guardarEnvioModal(false)" class="btn btn-secondary">ğŸ’¾ Solo Guardar</button>
                            <button onclick="guardarEnvioModal(true)" class="btn btn-success">ğŸ’¾ Guardar y Notificar</button>
                            <button onclick="cerrarModalEnvio()" class="btn btn-secondary">Cancelar</button>
                        </div>
                    </div>
                </div>

                <!-- Modal Ver Historial -->
                <div id="modalHistorialEnvio" class="modal-overlay" style="display:none;">
                    <div class="modal-content" style="max-width:500px;">
                        <div class="modal-header">
                            <h3>ğŸ“œ Historial del EnvÃ­o</h3>
                            <button onclick="cerrarModalHistorial()" class="btn-cerrar">Ã—</button>
                        </div>
                        <div class="modal-body">
                            <div id="historialEnvioContenido">
                                <div class="loading"><div class="spinner"></div><p>Cargando...</p></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button onclick="cerrarModalHistorial()" class="btn btn-secondary">Cerrar</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ESTADÃSTICAS DE ENVÃOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <section id="envios-estadisticasSection" class="section">
                <div class="page-header">
                    <h1>ğŸ“Š EstadÃ­sticas de EnvÃ­os</h1>
                    <p>AnÃ¡lisis de viabilidad de Tienda Digital</p>
                </div>

                <!-- Resumen General -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">ğŸ“¦</div>
                        <div class="stat-info">
                            <h3 id="statEnviosTotales">0</h3>
                            <p>EnvÃ­os del Mes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">âœ…</div>
                        <div class="stat-info">
                            <h3 id="statTasaEntrega">0%</h3>
                            <p>Tasa de Entrega</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">â±ï¸</div>
                        <div class="stat-info">
                            <h3 id="statTiempoPromedio">0 dÃ­as</h3>
                            <p>Tiempo Promedio</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">ğŸ”„</div>
                        <div class="stat-info">
                            <h3 id="statTasaDevolucion">0%</h3>
                            <p>Tasa DevoluciÃ³n</p>
                        </div>
                    </div>
                </div>

                <!-- Balance Financiero EnvÃ­os -->
                <div class="stats-grid" style="margin-top:1rem;">
                    <div class="stat-card" style="border-left:4px solid #10b981;">
                        <div class="stat-icon green">ğŸ’°</div>
                        <div class="stat-info">
                            <h3 id="statCobradoEnvios">$0</h3>
                            <p>Cobrado a Clientes</p>
                        </div>
                    </div>
                    <div class="stat-card" style="border-left:4px solid #ef4444;">
                        <div class="stat-icon red">ğŸ’¸</div>
                        <div class="stat-info">
                            <h3 id="statAsumidoEnvios">$0</h3>
                            <p>Asumido por Negocio</p>
                        </div>
                    </div>
                    <div class="stat-card" style="border-left:4px solid #3b82f6;">
                        <div class="stat-icon blue">ğŸ“Š</div>
                        <div class="stat-info">
                            <h3 id="statBalanceEnvios">$0</h3>
                            <p>Balance EnvÃ­os</p>
                        </div>
                    </div>
                    <div class="stat-card" style="border-left:4px solid #f59e0b;">
                        <div class="stat-icon yellow">ğŸ’µ</div>
                        <div class="stat-info">
                            <h3 id="statVentasDigital">$0</h3>
                            <p>Ventas Digital (mes)</p>
                        </div>
                    </div>
                </div>

                <!-- GrÃ¡ficos y Tablas -->
                <div class="charts-grid" style="margin-top:1.5rem;">
                    <div class="card">
                        <div class="card-header"><h4>ğŸ“ˆ EnvÃ­os por Mes</h4></div>
                        <div class="card-body">
                            <canvas id="chartEnviosMes"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h4>ğŸšš Por Transportadora</h4></div>
                        <div class="card-body">
                            <canvas id="chartTransportadoras"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Ranking Transportadoras -->
                <div class="card" style="margin-top:1.5rem;">
                    <div class="card-header"><h3>ğŸ† Ranking de Transportadoras</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Transportadora</th>
                                        <th>EnvÃ­os</th>
                                        <th>Entregados</th>
                                        <th>Devueltos</th>
                                        <th>Tiempo Prom.</th>
                                        <th>Tasa Ã‰xito</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyTransportadoras">
                                    <tr><td colspan="6" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Top Ciudades -->
                <div class="card" style="margin-top:1.5rem;">
                    <div class="card-header"><h3>ğŸ“ Top Ciudades Destino</h3></div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Ciudad</th>
                                        <th>Departamento</th>
                                        <th>EnvÃ­os</th>
                                        <th>Total Ventas</th>
                                        <th>Costo EnvÃ­o Prom.</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyCiudades">
                                    <tr><td colspan="5" class="text-center">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Modal Empleado -->
    <div id="modalEmpleado" class="modal-overlay" style="display:none;">
        <div class="modal-content" style="max-width:500px;">
            <div class="modal-header">
                <h2 id="tituloModalEmpleado">â• Nuevo Empleado</h2>
                <button class="modal-close" onclick="cerrarModalEmpleado()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="empleadoEditId">
                <div class="form-group">
                    <label>Nombre Completo *</label>
                    <input type="text" id="empleadoNombre" class="form-control" placeholder="Nombre del empleado" required>
                </div>
                <div class="form-row" style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
                    <div class="form-group">
                        <label>Usuario *</label>
                        <input type="text" id="empleadoUsuario" class="form-control" placeholder="usuario123">
                    </div>
                    <div class="form-group">
                        <label>CÃ©dula *</label>
                        <input type="text" id="empleadoCedula" class="form-control" placeholder="1234567890">
                    </div>
                </div>
                <div class="form-group">
                    <label>ContraseÃ±a *</label>
                    <input type="password" id="empleadoPassword" class="form-control" placeholder="ContraseÃ±a segura">
                    <small style="color:#94a3b8;">MÃ­nimo 4 caracteres</small>
                </div>
                <div class="form-group">
                    <label>Cargo</label>
                    <select id="empleadoCargo" class="form-control">
                        <option value="Vendedor">Vendedor</option>
                        <option value="Administrador">Administrador</option>
                        <option value="Jefe de Tienda">Jefe de Tienda</option>
                        <option value="Cajero">Cajero</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tiendas Permitidas</label>
                    <div style="display:flex;flex-wrap:wrap;gap:1rem;margin-top:0.5rem;">
                        <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                            <input type="checkbox" id="tiendaTodas" onchange="toggleTodasTiendas(this)"> Todas
                        </label>
                        <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                            <input type="checkbox" class="tienda-checkbox" value="AlcalÃ¡"> AlcalÃ¡
                        </label>
                        <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                            <input type="checkbox" class="tienda-checkbox" value="01"> Local 01
                        </label>
                        <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                            <input type="checkbox" class="tienda-checkbox" value="JordÃ¡n"> JordÃ¡n
                        </label>
                        <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                            <input type="checkbox" class="tienda-checkbox" value="Digital"> Digital
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                        <input type="checkbox" id="empleadoActivo" checked> Empleado Activo
                    </label>
                </div>
            </div>
            <div class="modal-footer" style="display:flex;gap:1rem;justify-content:flex-end;">
                <button onclick="cerrarModalEmpleado()" class="btn btn-secondary">Cancelar</button>
                <button onclick="guardarEmpleado()" class="btn btn-success">ğŸ’¾ Guardar</button>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
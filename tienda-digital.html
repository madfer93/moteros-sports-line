<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Digital | Moteros Sports Line</title>
    <link rel="icon" href="https://pbblthbrdkevuyjxyuar.supabase.co/storage/v1/object/public/productos-imagenes/moteros%20logo.jpg">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/pos.css">
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PANTALLA BLOQUEADA - CAJA CERRADA
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lockedScreen" class="locked-screen">
    <div class="locked-content">
        <div id="resumenCierreCompleto" class="hidden"></div>
        <div id="pantallaAbrirCaja">
            <img src="" alt="Moteros Sports Line" class="locked-logo locked-logo-digital logo-img">
            <h2>ğŸ”’ Caja Cerrada</h2>
            <p class="tienda-nombre tienda-nombre-digital">ğŸ“¦ Tienda Digital</p>
            <p>Abre la caja para comenzar a vender</p>
            <button class="btn btn-success btn-large" onclick="abrirModalCaja()">
                ğŸ“‚ Abrir Caja
            </button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="header header-digital">
    <div class="header-left">
        <img src="" alt="Logo" class="header-logo logo-img">
        <div>
            <h1>ğŸ“¦ Moteros - Tienda Digital</h1>
        </div>
    </div>
    <div class="header-info">
        <span id="vendedorBadge" class="badge badge-vendedor hidden">ğŸ‘¤ Vendedor</span>
        <span id="cajaBadge" class="badge badge-cerrada">ğŸ”’ Cerrada</span>
        <button id="btnAbrirCaja" class="btn btn-success" onclick="abrirModalCaja()">ğŸ“‚ Abrir</button>
        <button id="btnCerrarCaja" class="btn btn-danger hidden" onclick="mostrarModalCerrarCaja()">ğŸ“Š Cerrar Caja</button>
    </div>
</header>

<div id="alertas"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONTENIDO PRINCIPAL
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <!-- Panel de Productos -->
    <div class="panel">
        <h3 class="panel-title">ğŸ“¦ Productos Disponibles</h3>
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input search-input-digital" id="inputBuscar" 
                   placeholder="Buscar por nombre, marca o cÃ³digo..." 
                   oninput="filtrarProductos()">
        </div>
        <div id="listaProductos" class="productos-lista">
            <div class="carrito-vacio">Cargando productos...</div>
        </div>
    </div>
    
    <!-- Panel de Carrito -->
    <div class="panel">
        <div class="carrito-header">
            <h3 class="panel-title" style="margin:0;">ğŸ›’ Pedido</h3>
            <span id="carritoCount" class="carrito-count carrito-count-digital">0</span>
        </div>
        
        <div id="carritoItems" class="carrito-items">
            <div class="carrito-vacio">ğŸ›’ El pedido estÃ¡ vacÃ­o</div>
        </div>
        
        <!-- DATOS DE ENVÃO (obligatorio para digital) -->
        <div class="envio-form">
            <h4>ğŸ“¬ Datos de EnvÃ­o (obligatorio)</h4>
            <input type="text" id="clienteNombre" placeholder="Nombre completo del cliente *">
            <div class="row">
                <input type="tel" id="clienteTelefono" placeholder="TelÃ©fono *">
                <input type="text" id="clienteCedula" placeholder="CÃ©dula *">
            </div>
            <input type="text" id="direccionEnvio" placeholder="DirecciÃ³n completa de envÃ­o *">
            <div class="row">
                <input type="text" id="ciudadEnvio" placeholder="Ciudad *">
                <select id="departamentoEnvio">
                    <option value="">-- Departamento --</option>
                    <option value="Amazonas">Amazonas</option>
                    <option value="Antioquia">Antioquia</option>
                    <option value="Arauca">Arauca</option>
                    <option value="AtlÃ¡ntico">AtlÃ¡ntico</option>
                    <option value="BogotÃ¡ D.C.">BogotÃ¡ D.C.</option>
                    <option value="BolÃ­var">BolÃ­var</option>
                    <option value="BoyacÃ¡">BoyacÃ¡</option>
                    <option value="Caldas">Caldas</option>
                    <option value="CaquetÃ¡">CaquetÃ¡</option>
                    <option value="Casanare">Casanare</option>
                    <option value="Cauca">Cauca</option>
                    <option value="Cesar">Cesar</option>
                    <option value="ChocÃ³">ChocÃ³</option>
                    <option value="CÃ³rdoba">CÃ³rdoba</option>
                    <option value="Cundinamarca">Cundinamarca</option>
                    <option value="GuainÃ­a">GuainÃ­a</option>
                    <option value="Guaviare">Guaviare</option>
                    <option value="Huila">Huila</option>
                    <option value="La Guajira">La Guajira</option>
                    <option value="Magdalena">Magdalena</option>
                    <option value="Meta">Meta</option>
                    <option value="NariÃ±o">NariÃ±o</option>
                    <option value="Norte de Santander">Norte de Santander</option>
                    <option value="Putumayo">Putumayo</option>
                    <option value="QuindÃ­o">QuindÃ­o</option>
                    <option value="Risaralda">Risaralda</option>
                    <option value="San AndrÃ©s y Providencia">San AndrÃ©s y Providencia</option>
                    <option value="Santander">Santander</option>
                    <option value="Sucre">Sucre</option>
                    <option value="Tolima">Tolima</option>
                    <option value="Valle del Cauca">Valle del Cauca</option>
                    <option value="VaupÃ©s">VaupÃ©s</option>
                    <option value="Vichada">Vichada</option>
                </select>
            </div>
            <textarea id="notasEnvio" rows="2" placeholder="Notas adicionales (barrio, referencias, horario de entrega...)"></textarea>
        </div>
        
        <!-- MÃ©todos de Pago -->
        <div class="seccion">
            <h4 class="seccion-titulo">ğŸ’° MÃ©todo(s) de Pago</h4>
            <div class="metodos-grid">
                <div class="metodo-btn" data-metodo="Transferencia" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ¦</span>Transferencia
                </div>
                <div class="metodo-btn" data-metodo="Nequi" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ“±</span>Nequi
                </div>
                <div class="metodo-btn" data-metodo="Daviplata" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ“²</span>Daviplata
                </div>
                <div class="metodo-btn" data-metodo="Tarjeta" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ’³</span>Tarjeta
                </div>
                <div class="metodo-btn" data-metodo="Contraentrega" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ“¦</span>Contraentrega
                </div>
                <div class="metodo-btn" data-metodo="Addi" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ…°ï¸</span>Addi
                </div>
                <div class="metodo-btn" data-metodo="Sistecredito" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ“‹</span>SistecrÃ©dito
                </div>
                <div class="metodo-btn" data-metodo="Credito Motero" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸï¸</span>CrÃ©dito Motero
                </div>
                <div class="metodo-btn" data-metodo="Fodegas" onclick="toggleMetodo(this)">
                    <span class="icono">â›½</span>Fodegas
                </div>
            </div>
            <div id="metodosSeleccionados" class="metodos-seleccionados"></div>
        </div>
        
        <!-- Datos de CrÃ©dito (si aplica) -->
        <div id="datosCredito" class="datos-credito">
            <h4>ğŸ“ Datos de CrÃ©dito</h4>
            <select id="creditoAutoriza">
                <option value="">-- Â¿QuiÃ©n autoriza el crÃ©dito? --</option>
                <option value="Gerencia">Gerencia</option>
                <option value="Administrador">Administrador</option>
                <option value="Jefe de Tienda">Jefe de Tienda</option>
            </select>
            <select id="creditoCuotas">
                <option value="1">1 Cuota</option>
                <option value="2">2 Cuotas</option>
                <option value="3">3 Cuotas</option>
                <option value="4">4 Cuotas</option>
                <option value="6">6 Cuotas</option>
                <option value="12">12 Cuotas</option>
            </select>
        </div>
        
        <!-- Total -->
        <div class="total-box total-box-digital">
            <small>TOTAL DEL PEDIDO</small>
            <div id="totalMonto" class="monto">$0</div>
        </div>
        
        <!-- BotÃ³n Vender -->
        <button id="btnVender" class="btn btn-full btn-large btn-vender-digital" onclick="procesarVentaDigital()" disabled>
            ğŸ“¦ Registrar Pedido
        </button>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: ABRIR CAJA
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modalAbrirCaja" class="modal-overlay">
    <div class="modal">
        <h3>ğŸ“‚ Abrir Caja - Digital</h3>
        <div class="form-group">
            <label>ğŸ’µ Base de caja (dinero inicial)</label>
            <input type="number" id="montoInicial" value="0" min="0" placeholder="0">
        </div>
        <div class="form-group">
            <label>ğŸ‘¤ Nombre del vendedor</label>
            <input type="text" id="vendedorNombre" placeholder="Tu nombre completo">
        </div>
        <div class="modal-botones">
            <button class="btn btn-danger" onclick="cerrarModal()">Cancelar</button>
            <button class="btn btn-success" onclick="confirmarAbrirCaja()">âœ… Abrir Caja</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: CERRAR CAJA (DIGITAL)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modalCerrarCaja" class="modal-overlay">
    <div class="modal modal-large">
        <h3>ğŸ“Š Cierre de Caja - Digital</h3>
        <div id="resumenCierreModal"></div>
        
        <h4 style="margin:1rem 0 0.6rem; font-size:0.9rem; color:#475569;">ğŸ’µ Conteo de Pagos Recibidos</h4>
        <div class="cierre-grid">
            <div class="form-group">
                <label>ğŸ¦ Transferencias</label>
                <input type="number" id="transferenciaContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ“± Nequi</label>
                <input type="number" id="nequiContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ“² Daviplata</label>
                <input type="number" id="daviplataContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ’³ Tarjeta</label>
                <input type="number" id="tarjetaContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ“¦ Contraentrega</label>
                <input type="number" id="contraentregaContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ…°ï¸ Addi</label>
                <input type="number" id="addiContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ“‹ SistecrÃ©dito</label>
                <input type="number" id="sistecreditoContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>â›½ Fodegas</label>
                <input type="number" id="fodegasContado" min="0" placeholder="0">
            </div>
        </div>
        
        <div class="form-group">
            <label>ğŸ“ Observaciones (opcional)</label>
            <textarea id="observacionesCierre" rows="2" placeholder="Notas adicionales del cierre..."></textarea>
        </div>
        
        <div class="modal-botones">
            <button class="btn btn-danger" onclick="cerrarModal()">Cancelar</button>
            <button class="btn btn-success" onclick="confirmarCerrarCajaDigital()">âœ… Cerrar y Guardar</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: EDITAR PRECIO
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modalEditarPrecio" class="modal-overlay">
    <div class="modal">
        <h3>âœï¸ Modificar Precio</h3>
        <p id="nombreProductoEditar" style="font-weight:600; margin-bottom:1rem; color:#3b82f6;"></p>
        <div class="form-group">
            <label>Precio original</label>
            <input type="text" id="precioOriginal" disabled>
        </div>
        <div class="form-group">
            <label>Nuevo precio *</label>
            <input type="number" id="precioNuevo" min="0" placeholder="0">
        </div>
        <div class="form-group">
            <label>Motivo del descuento * (quiÃ©n autoriza)</label>
            <input type="text" id="motivoDescuento" placeholder="Ej: Autorizado por Gerencia">
        </div>
        <div class="modal-botones">
            <button class="btn btn-danger" onclick="cerrarModal()">Cancelar</button>
            <button class="btn btn-success" onclick="aplicarDescuento()">âœ… Aplicar</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCRIPTS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script src="js/config.js"></script>
<script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONFIGURACIÃ“N TIENDA DIGITAL
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const TIENDA = {
        nombre: 'Digital',
        tablaInventario: 'inventario_digital',
        storageKey: 'pos_caja_digital',
        esDigital: true
    };
</script>
<script src="js/pos.js"></script>

</body>
</html>
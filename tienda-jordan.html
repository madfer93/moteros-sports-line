<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Jordan | Moteros Sports Line</title>
    <link rel="icon" href="https://pbblthbrdkevuyjxyuar.supabase.co/storage/v1/object/public/productos-imagenes/moteros%20logo.jpg">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/pos.css">
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PANTALLA BLOQUEADA - CAJA CERRADA
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lockedScreen" class="locked-screen">
    <div class="locked-content">
        <!-- Resumen de cierre (se muestra despuÃ©s de cerrar caja) -->
        <div id="resumenCierreCompleto" class="hidden"></div>
        
        <!-- Pantalla inicial para abrir caja -->
        <div id="pantallaAbrirCaja">
            <img src="https://pbblthbrdkevuyjxyuar.supabase.co/storage/v1/object/public/productos-imagenes/moteros%20logo.jpg" 
                 alt="Moteros Sports Line" class="locked-logo logo-img">
            <h2>ğŸ”’ Caja Cerrada</h2>
            <p class="tienda-nombre tienda-nombre-display">JordÃ¡n</p>
            <p>Abre la caja para comenzar a vender</p>
            <button class="btn btn-success btn-large" onclick="abrirModalCaja()">
                ğŸ“‚ Abrir Caja
            </button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="header">
    <div class="header-left">
        <img src="https://pbblthbrdkevuyjxyuar.supabase.co/storage/v1/object/public/productos-imagenes/moteros%20logo.jpg" 
             alt="Logo" class="header-logo logo-img">
        <div>
            <h1>ğŸª Moteros - <span class="tienda-nombre-display">JordÃ¡n</span></h1>
        </div>
    </div>
    <div class="header-info">
        <span id="vendedorBadge" class="badge badge-vendedor hidden">ğŸ‘¤ Vendedor</span>
        <span id="cajaBadge" class="badge badge-cerrada">ğŸ”’ Cerrada</span>
        <button id="btnAbrirCaja" class="btn btn-success" onclick="abrirModalCaja()">ğŸ“‚ Abrir</button>
        <button id="btnCerrarCaja" class="btn btn-danger hidden" onclick="mostrarModalCerrarCaja()">ğŸ“Š Cerrar Caja</button>
    </div>
</header>

<!-- Alertas -->
<div id="alertas"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONTENIDO PRINCIPAL
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
    <!-- Panel de Productos -->
    <div class="panel">
        <h3 class="panel-title">ğŸ“¦ Productos</h3>
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" id="inputBuscar" 
                   placeholder="Buscar por nombre, marca o cÃ³digo..." 
                   oninput="filtrarProductos()">
        </div>
        <div id="listaProductos" class="productos-lista">
            <div class="carrito-vacio">Cargando productos...</div>
        </div>
    </div>
    
    <!-- Panel de Carrito -->
    <div class="panel">
        <div class="carrito-header">
            <h3 class="panel-title" style="margin:0;">ğŸ›’ Carrito</h3>
            <span id="carritoCount" class="carrito-count">0</span>
        </div>
        
        <div id="carritoItems" class="carrito-items">
            <div class="carrito-vacio">ğŸ›’ El carrito estÃ¡ vacÃ­o</div>
        </div>
        
        <!-- Destino -->
        <div class="seccion">
            <h4 class="seccion-titulo">ğŸ“ Destino de la Venta</h4>
            <select id="selectDestino" onchange="actualizarCredito()">
                <option value="tienda">ğŸª Venta en Tienda (cliente se lleva)</option>
                <option value="digital">ğŸ“¦ Transferir a Tienda Digital (envÃ­o)</option>
            </select>
        </div>
        
        <!-- MÃ©todos de Pago -->
        <div class="seccion">
            <h4 class="seccion-titulo">ğŸ’° MÃ©todo(s) de Pago</h4>
            <div class="metodos-grid">
                <div class="metodo-btn" data-metodo="Efectivo" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ’µ</span>Efectivo
                </div>
                <div class="metodo-btn" data-metodo="Transferencia" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ¦</span>Transferencia
                </div>
                <div class="metodo-btn" data-metodo="Nequi" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ“±</span>Nequi
                </div>
                <div class="metodo-btn" data-metodo="Daviplata" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ“²</span>Daviplata
                </div>
                <div class="metodo-btn" data-metodo="Tarjeta" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ’³</span>Tarjeta
                </div>
                <div class="metodo-btn" data-metodo="Datafono" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ–¥ï¸</span>DatÃ¡fono
                </div>
                <div class="metodo-btn" data-metodo="Addi" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ…°ï¸</span>Addi
                </div>
                <div class="metodo-btn" data-metodo="Sistecredito" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸ“‹</span>SistecrÃ©dito
                </div>
                <div class="metodo-btn" data-metodo="Credito Motero" onclick="toggleMetodo(this)">
                    <span class="icono">ğŸï¸</span>CrÃ©dito Motero
                </div>
                <div class="metodo-btn" data-metodo="Fodegas" onclick="toggleMetodo(this)">
                    <span class="icono">â›½</span>Fodegas
                </div>
            </div>
            <div id="metodosSeleccionados" class="metodos-seleccionados"></div>
        </div>
        
        <!-- Datos de CrÃ©dito -->
        <div id="datosCredito" class="datos-credito">
            <h4>ğŸ“ Datos del Cliente (requerido para crÃ©dito)</h4>
            <input type="text" id="creditoNombre" placeholder="Nombre completo *">
            <div class="row">
                <input type="tel" id="creditoTelefono" placeholder="TelÃ©fono *">
                <input type="text" id="creditoCedula" placeholder="CÃ©dula *">
            </div>
            <input type="text" id="creditoDireccion" placeholder="DirecciÃ³n *">
            <select id="creditoAutoriza">
                <option value="">-- Â¿QuiÃ©n autoriza el crÃ©dito? --</option>
                <option value="Gerencia">Gerencia</option>
                <option value="Administrador">Administrador</option>
                <option value="Jefe de Tienda">Jefe de Tienda</option>
            </select>
            <select id="creditoCuotas">
                <option value="1">1 Cuota (pago Ãºnico)</option>
                <option value="2">2 Cuotas</option>
                <option value="3">3 Cuotas</option>
                <option value="4">4 Cuotas</option>
                <option value="6">6 Cuotas</option>
                <option value="12">12 Cuotas</option>
            </select>
        </div>
        
        <!-- Total -->
        <div class="total-box">
            <small>TOTAL A PAGAR</small>
            <div id="totalMonto" class="monto">$0</div>
        </div>
        
        <!-- BotÃ³n Vender -->
        <button id="btnVender" class="btn btn-success btn-full btn-large" onclick="procesarVenta()" disabled>
            âœ… Procesar Venta
        </button>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: LOGIN EMPLEADO
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modalLoginEmpleado" class="modal-overlay">
    <div class="modal">
        <h3>ğŸ” Iniciar SesiÃ³n</h3>
        <p style="color:#64748b;font-size:0.9rem;margin-bottom:1.5rem;">Ingresa tus credenciales para acceder al POS</p>
        <div class="form-group">
            <label>ğŸ‘¤ Usuario o CÃ©dula</label>
            <input type="text" id="loginUsuario" placeholder="Tu usuario o nÃºmero de cÃ©dula" autocomplete="username">
        </div>
        <div class="form-group">
            <label>ğŸ”‘ ContraseÃ±a</label>
            <input type="password" id="loginPassword" placeholder="Tu contraseÃ±a" autocomplete="current-password">
        </div>
        <div id="loginError" class="alert alert-danger" style="display:none;margin-bottom:1rem;"></div>
        <div class="modal-botones">
            <button class="btn btn-success btn-full" onclick="verificarLogin()">ğŸ”“ Iniciar SesiÃ³n</button>
        </div>
        <p style="color:#94a3b8;font-size:0.8rem;margin-top:1rem;text-align:center;">
            Â¿Olvidaste tu contraseÃ±a? Contacta al administrador
        </p>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: ABRIR CAJA
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modalAbrirCaja" class="modal-overlay">
    <div class="modal">
        <h3>ğŸ“‚ Abrir Caja</h3>
        <div id="empleadoLogueado" style="background:linear-gradient(135deg,#10b981,#059669);color:white;padding:0.75rem 1rem;border-radius:8px;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem;">
            <span style="font-size:1.5rem;">ğŸ‘¤</span>
            <div>
                <div style="font-weight:700;" id="nombreEmpleadoLogueado">Empleado</div>
                <div style="font-size:0.8rem;opacity:0.9;" id="cargoEmpleadoLogueado">Cargo</div>
            </div>
        </div>
        <div class="form-group">
            <label>ğŸ’µ Base de caja (dinero inicial)</label>
            <input type="number" id="montoInicial" value="100000" min="0" placeholder="100000">
        </div>
        <input type="hidden" id="vendedorNombre">
        <div class="modal-botones">
            <button class="btn btn-danger" onclick="cerrarSesionEmpleado()">ğŸšª Cerrar SesiÃ³n</button>
            <button class="btn btn-success" onclick="confirmarAbrirCaja()">âœ… Abrir Caja</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: CERRAR CAJA
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modalCerrarCaja" class="modal-overlay">
    <div class="modal modal-large">
        <h3>ğŸ“Š Cierre de Caja</h3>
        
        <!-- Resumen del sistema -->
        <div id="resumenCierreModal"></div>
        
        <!-- Conteo por mÃ©todo -->
        <h4 style="margin:1rem 0 0.6rem; font-size:0.9rem; color:#475569;">ğŸ’µ Conteo de Dinero</h4>
        <div class="cierre-grid">
            <div class="form-group">
                <label>ğŸ’µ Efectivo contado *</label>
                <input type="number" id="efectivoContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ¦ Transferencias</label>
                <input type="number" id="transferenciaContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ“± Nequi</label>
                <input type="number" id="nequiContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ“² Daviplata</label>
                <input type="number" id="daviplataContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ’³ Tarjeta</label>
                <input type="number" id="tarjetaContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ–¥ï¸ DatÃ¡fono</label>
                <input type="number" id="datafonoContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ…°ï¸ Addi</label>
                <input type="number" id="addiContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>ğŸ“‹ SistecrÃ©dito</label>
                <input type="number" id="sistecreditoContado" min="0" placeholder="0">
            </div>
            <div class="form-group">
                <label>â›½ Fodegas</label>
                <input type="number" id="fodegasContado" min="0" placeholder="0">
            </div>
        </div>
        
        <!-- Gastos del dÃ­a -->
        <div class="gastos-container">
            <h4>ğŸ’¸ Gastos del DÃ­a</h4>
            <div id="gastosLista"></div>
            <button class="btn-agregar-gasto" onclick="agregarGasto()">+ Agregar Gasto</button>
            <div class="gastos-total">
                <span>Total Gastos:</span>
                <span id="totalGastos">$0</span>
            </div>
        </div>
        
        <!-- Observaciones -->
        <div class="form-group">
            <label>ğŸ“ Observaciones (opcional)</label>
            <textarea id="observacionesCierre" rows="2" placeholder="Notas adicionales del cierre..."></textarea>
        </div>
        
        <div class="modal-botones">
            <button class="btn btn-danger" onclick="cerrarModal()">Cancelar</button>
            <button class="btn btn-success" onclick="confirmarCerrarCaja()">âœ… Cerrar y Guardar</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: EDITAR PRECIO
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modalEditarPrecio" class="modal-overlay">
    <div class="modal">
        <h3>âœï¸ Modificar Precio</h3>
        <p id="nombreProductoEditar" style="font-weight:600; margin-bottom:1rem; color:var(--primary);"></p>
        <div class="form-group">
            <label>Precio original</label>
            <input type="text" id="precioOriginal" disabled>
        </div>
        <div class="form-group">
            <label>Nuevo precio *</label>
            <input type="number" id="precioNuevo" min="0" placeholder="0">
        </div>
        <div class="form-group">
            <label>Motivo del descuento * (quiÃ©n autoriza)</label>
            <input type="text" id="motivoDescuento" placeholder="Ej: Autorizado por Gerencia - descuento cliente frecuente">
        </div>
        <div class="modal-botones">
            <button class="btn btn-danger" onclick="cerrarModal()">Cancelar</button>
            <button class="btn btn-success" onclick="aplicarDescuento()">âœ… Aplicar</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCRIPTS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script src="js/config.js"></script>
<script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONFIGURACIÃ“N DE ESTA TIENDA
    // Cambiar estos valores para cada tienda
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const TIENDA = {
        nombre: 'JordÃ¡n',
        tablaInventario: 'inventario_jordan',
        storageKey: 'pos_caja_jordan'
    };
</script>
<script src="js/pos.js"></script>

</body>
</html>